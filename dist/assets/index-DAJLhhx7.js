import{r as e,b as t,R as s}from"./vendor-react-zHXwu4Hr.js";import{A as a,U as n,S as i,F as o,a as r,E as l,D as c,b as d,T as m,V as u,M as h,I as p,c as g,C as w,X as f,d as x,P as b,e as v,R as y,H as j,u as N,G as k,f as C,g as S,h as z,i as E,B as P,j as $,L as A,k as T,l as F,m as _,n as I,o as L}from"./vendor-utils-utPOl04C.js";import{C as D,a as B,b as O,c as M,d as R,e as U,f as W,g as H,h as V,i as q,j as J,k as Y,l as K,m as G,n as Z,o as X,p as Q,q as ee,r as te,s as se,t as ae,u as ne,v as ie}from"./vendor-ui-Cg9uOrKH.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var oe={exports:{}},re={},le=e,ce=Symbol.for("react.element"),de=Symbol.for("react.fragment"),me=Object.prototype.hasOwnProperty,ue=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,he={key:!0,ref:!0,__self:!0,__source:!0};function pe(e,t,s){var a,n={},i=null,o=null;for(a in void 0!==s&&(i=""+s),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(o=t.ref),t)me.call(t,a)&&!he.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:ce,type:e,key:i,ref:o,props:n,_owner:ue.current}}re.Fragment=de,re.jsx=pe,re.jsxs=pe,oe.exports=re;var ge,we=oe.exports,fe=t;ge=fe.createRoot,fe.hydrateRoot;const xe={};
/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/
function be(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function ve(e,t){return e.get(be(e,t))}function ye(e,t,s){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,s)}const je={},Ne=e=>new Promise(t=>{if(!e)return t();const s=window.scrollX,a=window.scrollY;je.restoreFocusTimeout=setTimeout(()=>{je.previousActiveElement instanceof HTMLElement?(je.previousActiveElement.focus(),je.previousActiveElement=null):document.body&&document.body.focus(),t()},100),window.scrollTo(s,a)}),ke="swal2-",Ce=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((e,t)=>(e[t]=ke+t,e),{}),Se=["success","warning","info","question","error"].reduce((e,t)=>(e[t]=ke+t,e),{}),ze=e=>e.charAt(0).toUpperCase()+e.slice(1),Ee=[],Pe=(e,t=null)=>{var s;s=`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`,Ee.includes(s)||Ee.push(s)},$e=e=>"function"==typeof e?e():e,Ae=e=>e&&"function"==typeof e.toPromise,Te=e=>Ae(e)?e.toPromise():Promise.resolve(e),Fe=e=>e&&Promise.resolve(e)===e,_e=()=>document.body.querySelector(`.${Ce.container}`),Ie=e=>{const t=_e();return t?t.querySelector(e):null},Le=e=>Ie(`.${e}`),De=()=>Le(Ce.popup),Be=()=>Le(Ce.icon),Oe=()=>Le(Ce.title),Me=()=>Le(Ce["html-container"]),Re=()=>Le(Ce.image),Ue=()=>Le(Ce["progress-steps"]),We=()=>Le(Ce["validation-message"]),He=()=>Ie(`.${Ce.actions} .${Ce.confirm}`),Ve=()=>Ie(`.${Ce.actions} .${Ce.cancel}`),qe=()=>Ie(`.${Ce.actions} .${Ce.deny}`),Je=()=>Ie(`.${Ce.loader}`),Ye=()=>Le(Ce.actions),Ke=()=>Le(Ce.footer),Ge=()=>Le(Ce["timer-progress-bar"]),Ze=()=>Le(Ce.close),Xe=()=>{const e=De();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),s=Array.from(t).sort((e,t)=>{const s=parseInt(e.getAttribute("tabindex")||"0"),a=parseInt(t.getAttribute("tabindex")||"0");return s>a?1:s<a?-1:0}),a=e.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),n=Array.from(a).filter(e=>"-1"!==e.getAttribute("tabindex"));return[...new Set(s.concat(n))].filter(e=>wt(e))},Qe=()=>st(document.body,Ce.shown)&&!st(document.body,Ce["toast-shown"])&&!st(document.body,Ce["no-backdrop"]),et=()=>{const e=De();return!!e&&st(e,Ce.toast)},tt=(e,t)=>{if(e.textContent="",t){const s=(new DOMParser).parseFromString(t,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(t=>{e.appendChild(t)});const n=s.querySelector("body");n&&Array.from(n.childNodes).forEach(t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})}},st=(e,t)=>{if(!t)return!1;const s=t.split(/\s+/);for(let a=0;a<s.length;a++)if(!e.classList.contains(s[a]))return!1;return!0},at=(e,t,s)=>{if(((e,t)=>{Array.from(e.classList).forEach(s=>{Object.values(Ce).includes(s)||Object.values(Se).includes(s)||Object.values(t.showClass||{}).includes(s)||e.classList.remove(s)})})(e,t),!t.customClass)return;const a=t.customClass[s];a&&("string"==typeof a||a.forEach)&&rt(e,a)},nt=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${Ce.popup} > .${Ce[t]}`);case"checkbox":return e.querySelector(`.${Ce.popup} > .${Ce.checkbox} input`);case"radio":return e.querySelector(`.${Ce.popup} > .${Ce.radio} input:checked`)||e.querySelector(`.${Ce.popup} > .${Ce.radio} input:first-child`);case"range":return e.querySelector(`.${Ce.popup} > .${Ce.range} input`);default:return e.querySelector(`.${Ce.popup} > .${Ce.input}`)}},it=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},ot=(e,t,s)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(t=>{Array.isArray(e)?e.forEach(e=>{s?e.classList.add(t):e.classList.remove(t)}):s?e.classList.add(t):e.classList.remove(t)}))},rt=(e,t)=>{ot(e,t,!0)},lt=(e,t)=>{ot(e,t,!1)},ct=(e,t)=>{const s=Array.from(e.children);for(let a=0;a<s.length;a++){const e=s[a];if(e instanceof HTMLElement&&st(e,t))return e}},dt=(e,t,s)=>{s===`${parseInt(s)}`&&(s=parseInt(s)),s||0===parseInt(s)?e.style.setProperty(t,"number"==typeof s?`${s}px`:s):e.style.removeProperty(t)},mt=(e,t="flex")=>{e&&(e.style.display=t)},ut=e=>{e&&(e.style.display="none")},ht=(e,t="block")=>{e&&new MutationObserver(()=>{gt(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},pt=(e,t,s,a)=>{const n=e.querySelector(t);n&&n.style.setProperty(s,a)},gt=(e,t,s="flex")=>{t?mt(e,s):ut(e)},wt=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ft=e=>!!(e.scrollHeight>e.clientHeight),xt=e=>{const t=window.getComputedStyle(e),s=parseFloat(t.getPropertyValue("animation-duration")||"0"),a=parseFloat(t.getPropertyValue("transition-duration")||"0");return s>0||a>0},bt=(e,t=!1)=>{const s=Ge();s&&wt(s)&&(t&&(s.style.transition="none",s.style.width="100%"),setTimeout(()=>{s.style.transition=`width ${e/1e3}s linear`,s.style.width="0%"},10))},vt=`\n <div aria-labelledby="${Ce.title}" aria-describedby="${Ce["html-container"]}" class="${Ce.popup}" tabindex="-1">\n   <button type="button" class="${Ce.close}"></button>\n   <ul class="${Ce["progress-steps"]}"></ul>\n   <div class="${Ce.icon}"></div>\n   <img class="${Ce.image}" />\n   <h2 class="${Ce.title}" id="${Ce.title}"></h2>\n   <div class="${Ce["html-container"]}" id="${Ce["html-container"]}"></div>\n   <input class="${Ce.input}" id="${Ce.input}" />\n   <input type="file" class="${Ce.file}" />\n   <div class="${Ce.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${Ce.select}" id="${Ce.select}"></select>\n   <div class="${Ce.radio}"></div>\n   <label class="${Ce.checkbox}">\n     <input type="checkbox" id="${Ce.checkbox}" />\n     <span class="${Ce.label}"></span>\n   </label>\n   <textarea class="${Ce.textarea}" id="${Ce.textarea}"></textarea>\n   <div class="${Ce["validation-message"]}" id="${Ce["validation-message"]}"></div>\n   <div class="${Ce.actions}">\n     <div class="${Ce.loader}"></div>\n     <button type="button" class="${Ce.confirm}"></button>\n     <button type="button" class="${Ce.deny}"></button>\n     <button type="button" class="${Ce.cancel}"></button>\n   </div>\n   <div class="${Ce.footer}"></div>\n   <div class="${Ce["timer-progress-bar-container"]}">\n     <div class="${Ce["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),yt=()=>{je.currentInstance.resetValidationMessage()},jt=e=>{const t=(()=>{const e=_e();return!!e&&(e.remove(),lt([document.documentElement,document.body],[Ce["no-backdrop"],Ce["toast-shown"],Ce["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return;const s=document.createElement("div");s.className=Ce.container,t&&rt(s,Ce["no-transition"]),tt(s,vt),s.dataset.swal2Theme=e.theme;const a="string"==typeof(n=e.target)?document.querySelector(n):n;var n;a.appendChild(s),e.topLayer&&(s.setAttribute("popover",""),s.showPopover()),(e=>{const t=De();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&rt(_e(),Ce.rtl)})(a),(()=>{const e=De(),t=ct(e,Ce.input),s=ct(e,Ce.file),a=e.querySelector(`.${Ce.range} input`),n=e.querySelector(`.${Ce.range} output`),i=ct(e,Ce.select),o=e.querySelector(`.${Ce.checkbox} input`),r=ct(e,Ce.textarea);t.oninput=yt,s.onchange=yt,i.onchange=yt,o.onchange=yt,r.oninput=yt,a.oninput=()=>{yt(),n.value=a.value},a.onchange=()=>{yt(),n.value=a.value}})()},Nt=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?kt(e,t):e&&tt(t,e)},kt=(e,t)=>{e.jquery?Ct(t,e):tt(t,e.toString())},Ct=(e,t)=>{if(e.textContent="",0 in t)for(let s=0;s in t;s++)e.appendChild(t[s].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},St=(e,t)=>{const s=Ye(),a=Je();s&&a&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?mt(s):ut(s),at(s,t,"actions"),function(e,t,s){const a=He(),n=qe(),i=Ve();if(!a||!n||!i)return;Et(a,"confirm",s),Et(n,"deny",s),Et(i,"cancel",s),function(e,t,s,a){if(!a.buttonsStyling)return void lt([e,t,s],Ce.styled);rt([e,t,s],Ce.styled),a.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",a.confirmButtonColor);a.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",a.denyButtonColor);a.cancelButtonColor&&s.style.setProperty("--swal2-cancel-button-background-color",a.cancelButtonColor);zt(e),zt(t),zt(s)}(a,n,i,s),s.reverseButtons&&(s.toast?(e.insertBefore(i,a),e.insertBefore(n,a)):(e.insertBefore(i,t),e.insertBefore(n,t),e.insertBefore(a,t)))}(s,a,t),tt(a,t.loaderHtml||""),at(a,t,"loader"))};function zt(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const s=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${s}`))}function Et(e,t,s){const a=ze(t);gt(e,s[`show${a}Button`],"inline-block"),tt(e,s[`${t}ButtonText`]||""),e.setAttribute("aria-label",s[`${t}ButtonAriaLabel`]||""),e.className=Ce[t],at(e,s,`${t}Button`)}const Pt=(e,t)=>{const s=_e();s&&(!function(e,t){"string"==typeof t?e.style.background=t:t||rt([document.documentElement,document.body],Ce["no-backdrop"])}(s,t.backdrop),function(e,t){if(!t)return;rt(e,t in Ce?Ce[t]:Ce.center)}(s,t.position),function(e,t){if(!t)return;rt(e,Ce[`grow-${t}`])}(s,t.grow),at(s,t,"container"))};var $t={innerParams:new WeakMap,domCache:new WeakMap};const At=["input","file","range","select","radio","checkbox","textarea"],Tt=e=>{if(!e.input)return;if(!Ot[e.input])return Object.keys(Ot).join(" | "),void e.input;const t=Dt(e.input);if(!t)return;const s=Ot[e.input](t,e);mt(t),e.inputAutoFocus&&setTimeout(()=>{it(s)})},Ft=(e,t)=>{const s=De();if(!s)return;const a=nt(s,e);if(a){(e=>{for(let t=0;t<e.attributes.length;t++){const s=e.attributes[t].name;["id","type","value","style"].includes(s)||e.removeAttribute(s)}})(a);for(const e in t)a.setAttribute(e,t[e])}},_t=e=>{if(!e.input)return;const t=Dt(e.input);t&&at(t,e,"input")},It=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Lt=(e,t,s)=>{if(s.inputLabel){const a=document.createElement("label"),n=Ce["input-label"];a.setAttribute("for",e.id),a.className=n,"object"==typeof s.customClass&&rt(a,s.customClass.inputLabel),a.innerText=s.inputLabel,t.insertAdjacentElement("beforebegin",a)}},Dt=e=>{const t=De();if(t)return ct(t,Ce[e]||Ce.input)},Bt=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Fe(t)},Ot={};Ot.text=Ot.email=Ot.password=Ot.number=Ot.tel=Ot.url=Ot.search=Ot.date=Ot["datetime-local"]=Ot.time=Ot.week=Ot.month=(e,t)=>(Bt(e,t.inputValue),Lt(e,e,t),It(e,t),e.type=t.input,e),Ot.file=(e,t)=>(Lt(e,e,t),It(e,t),e),Ot.range=(e,t)=>{const s=e.querySelector("input"),a=e.querySelector("output");return Bt(s,t.inputValue),s.type=t.input,Bt(a,t.inputValue),Lt(s,e,t),e},Ot.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const s=document.createElement("option");tt(s,t.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,e.appendChild(s)}return Lt(e,e,t),e},Ot.radio=e=>(e.textContent="",e),Ot.checkbox=(e,t)=>{const s=nt(De(),"checkbox");s.value="1",s.checked=Boolean(t.inputValue);const a=e.querySelector("span");return tt(a,t.inputPlaceholder||t.inputLabel),s},Ot.textarea=(e,t)=>{Bt(e,t.inputValue),It(e,t),Lt(e,e,t);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(De()).width);new MutationObserver(()=>{if(!document.body.contains(e))return;const a=e.offsetWidth+(n=e,parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight));var n;a>s?De().style.width=`${a}px`:dt(De(),"width",t.width)}).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Mt=(e,t)=>{const s=Me();s&&(ht(s),at(s,t,"htmlContainer"),t.html?(Nt(t.html,s),mt(s,"block")):t.text?(s.textContent=t.text,mt(s,"block")):ut(s),((e,t)=>{const s=De();if(!s)return;const a=$t.innerParams.get(e),n=!a||t.input!==a.input;At.forEach(e=>{const a=ct(s,Ce[e]);a&&(Ft(e,t.inputAttributes),a.className=Ce[e],n&&ut(a))}),t.input&&(n&&Tt(t),_t(t))})(e,t))},Rt=(e,t)=>{for(const[s,a]of Object.entries(Se))t.icon!==s&&lt(e,a);rt(e,t.icon&&Se[t.icon]),Ht(e,t),Ut(),at(e,t,"icon")},Ut=()=>{const e=De();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),s=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let a=0;a<s.length;a++)s[a].style.backgroundColor=t},Wt=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let s=e.innerHTML,a="";if(t.iconHtml)a=Vt(t.iconHtml);else if("success"===t.icon)a=(e=>`\n  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div>\n  ${e.animation?'<div class="swal2-success-fix"></div>':""}\n  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}\n`)(t),s=s.replace(/ style=".*?"/g,"");else if("error"===t.icon)a='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n';else if(t.icon){a=Vt({question:"?",warning:"!",info:"i"}[t.icon])}s.trim()!==a.trim()&&tt(e,a)},Ht=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const s of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])pt(e,s,"background-color",t.iconColor);pt(e,".swal2-success-ring","border-color",t.iconColor)}},Vt=e=>`<div class="${Ce["icon-content"]}">${e}</div>`;let qt=!1,Jt=0,Yt=0,Kt=0,Gt=0;const Zt=e=>{const t=De();if(e.target===t||Be().contains(e.target)){qt=!0;const s=es(e);Jt=s.clientX,Yt=s.clientY,Kt=parseInt(t.style.insetInlineStart)||0,Gt=parseInt(t.style.insetBlockStart)||0,rt(t,"swal2-dragging")}},Xt=e=>{const t=De();if(qt){let{clientX:s,clientY:a}=es(e);t.style.insetInlineStart=`${Kt+(s-Jt)}px`,t.style.insetBlockStart=`${Gt+(a-Yt)}px`}},Qt=()=>{const e=De();qt=!1,lt(e,"swal2-dragging")},es=e=>{let t=0,s=0;return e.type.startsWith("mouse")?(t=e.clientX,s=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,s=e.touches[0].clientY),{clientX:t,clientY:s}},ts=(e,t)=>{const s=_e(),a=De();if(s&&a){if(t.toast){dt(s,"width",t.width),a.style.width="100%";const e=Je();e&&a.insertBefore(e,Be())}else dt(a,"width",t.width);dt(a,"padding",t.padding),t.color&&(a.style.color=t.color),t.background&&(a.style.background=t.background),ut(We()),ss(a,t),t.draggable&&!t.toast?(rt(a,Ce.draggable),(e=>{e.addEventListener("mousedown",Zt),document.body.addEventListener("mousemove",Xt),e.addEventListener("mouseup",Qt),e.addEventListener("touchstart",Zt),document.body.addEventListener("touchmove",Xt),e.addEventListener("touchend",Qt)})(a)):(lt(a,Ce.draggable),(e=>{e.removeEventListener("mousedown",Zt),document.body.removeEventListener("mousemove",Xt),e.removeEventListener("mouseup",Qt),e.removeEventListener("touchstart",Zt),document.body.removeEventListener("touchmove",Xt),e.removeEventListener("touchend",Qt)})(a))}},ss=(e,t)=>{const s=t.showClass||{};e.className=`${Ce.popup} ${wt(e)?s.popup:""}`,t.toast?(rt([document.documentElement,document.body],Ce["toast-shown"]),rt(e,Ce.toast)):rt(e,Ce.modal),at(e,t,"popup"),"string"==typeof t.customClass&&rt(e,t.customClass),t.icon&&rt(e,Ce[`icon-${t.icon}`])},as=e=>{const t=document.createElement("li");return rt(t,Ce["progress-step"]),tt(t,e),t},ns=e=>{const t=document.createElement("li");return rt(t,Ce["progress-step-line"]),e.progressStepsDistance&&dt(t,"width",e.progressStepsDistance),t},is=(e,t)=>{ts(0,t),Pt(0,t),((e,t)=>{const s=Ue();if(!s)return;const{progressSteps:a,currentProgressStep:n}=t;a&&0!==a.length&&void 0!==n?(mt(s),s.textContent="",a.length,a.forEach((e,i)=>{const o=as(e);if(s.appendChild(o),i===n&&rt(o,Ce["active-progress-step"]),i!==a.length-1){const e=ns(t);s.appendChild(e)}})):ut(s)})(0,t),((e,t)=>{const s=$t.innerParams.get(e),a=Be();if(!a)return;if(s&&t.icon===s.icon)return Wt(a,t),void Rt(a,t);if(!t.icon&&!t.iconHtml)return void ut(a);if(t.icon&&-1===Object.keys(Se).indexOf(t.icon))return t.icon,void ut(a);mt(a),Wt(a,t),Rt(a,t),rt(a,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Ut)})(e,t),((e,t)=>{const s=Re();s&&(t.imageUrl?(mt(s,""),s.setAttribute("src",t.imageUrl),s.setAttribute("alt",t.imageAlt||""),dt(s,"width",t.imageWidth),dt(s,"height",t.imageHeight),s.className=Ce.image,at(s,t,"image")):ut(s))})(0,t),((e,t)=>{const s=Oe();s&&(ht(s),gt(s,t.title||t.titleText,"block"),t.title&&Nt(t.title,s),t.titleText&&(s.innerText=t.titleText),at(s,t,"title"))})(0,t),((e,t)=>{const s=Ze();s&&(tt(s,t.closeButtonHtml||""),at(s,t,"closeButton"),gt(s,t.showCloseButton),s.setAttribute("aria-label",t.closeButtonAriaLabel||""))})(0,t),Mt(e,t),St(0,t),((e,t)=>{const s=Ke();s&&(ht(s),gt(s,t.footer,"block"),t.footer&&Nt(t.footer,s),at(s,t,"footer"))})(0,t);const s=De();"function"==typeof t.didRender&&s&&t.didRender(s),je.eventEmitter.emit("didRender",s)},os=()=>{var e;return null===(e=He())||void 0===e?void 0:e.click()},rs=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ls=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},cs=(e,t)=>{var s;const a=Xe();if(a.length)return-2===(e+=t)&&(e=a.length-1),e===a.length?e=0:-1===e&&(e=a.length-1),void a[e].focus();null===(s=De())||void 0===s||s.focus()},ds=["ArrowRight","ArrowDown"],ms=["ArrowLeft","ArrowUp"],us=(e,t,s)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?hs(t,e):"Tab"===t.key?ps(t):[...ds,...ms].includes(t.key)?gs(t.key):"Escape"===t.key&&ws(t,e,s)))},hs=(e,t)=>{if(!$e(t.allowEnterKey))return;const s=nt(De(),t.input);if(e.target&&s&&e.target instanceof HTMLElement&&e.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(t.input))return;os(),e.preventDefault()}},ps=e=>{const t=e.target,s=Xe();let a=-1;for(let n=0;n<s.length;n++)if(t===s[n]){a=n;break}e.shiftKey?cs(a,-1):cs(a,1),e.stopPropagation(),e.preventDefault()},gs=e=>{const t=Ye(),s=He(),a=qe(),n=Ve();if(!(t&&s&&a&&n))return;const i=[s,a,n];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=ds.includes(e)?"nextElementSibling":"previousElementSibling";let r=document.activeElement;if(r){for(let e=0;e<t.children.length;e++){if(r=r[o],!r)return;if(r instanceof HTMLButtonElement&&wt(r))break}r instanceof HTMLButtonElement&&r.focus()}},ws=(e,t,s)=>{e.preventDefault(),$e(t.allowEscapeKey)&&s(rs.esc)};var fs={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const xs=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},bs="undefined"!=typeof window&&!!window.GestureEvent,vs=()=>{const e=_e();if(!e)return;let t;e.ontouchstart=e=>{t=ys(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},ys=e=>{const t=e.target,s=_e(),a=Me();return!(!s||!a)&&(!js(e)&&!Ns(e)&&(t===s||!(ft(s)||!(t instanceof HTMLElement)||((e,t)=>{let s=e;for(;s&&s!==t;){if(ft(s))return!0;s=s.parentElement}return!1})(t,a)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||ft(a)&&a.contains(t))))},js=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Ns=e=>e.touches&&e.touches.length>1;let ks=null;const Cs=e=>{null===ks&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(ks=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ks+(()=>{const e=document.createElement("div");e.className=Ce["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function Ss(e,t,s,a){et()?_s(e,a):(Ne(s).then(()=>_s(e,a)),ls(je)),bs?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Qe()&&(null!==ks&&(document.body.style.paddingRight=`${ks}px`,ks=null),(()=>{if(st(document.body,Ce.iosfix)){const e=parseInt(document.body.style.top,10);lt(document.body,Ce.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),xs()),lt([document.documentElement,document.body],[Ce.shown,Ce["height-auto"],Ce["no-backdrop"],Ce["toast-shown"]])}function zs(e){e=As(e);const t=fs.swalPromiseResolve.get(this),s=Es(this);this.isAwaitingPromise?e.isDismissed||($s(this),t(e)):s&&t(e)}const Es=e=>{const t=De();if(!t)return!1;const s=$t.innerParams.get(e);if(!s||st(t,s.hideClass.popup))return!1;lt(t,s.showClass.popup),rt(t,s.hideClass.popup);const a=_e();return lt(a,s.showClass.backdrop),rt(a,s.hideClass.backdrop),Ts(e,t,s),!0};function Ps(e){const t=fs.swalPromiseReject.get(this);$s(this),t&&t(e)}const $s=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,$t.innerParams.get(e)||e._destroy())},As=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),Ts=(e,t,s)=>{var a;const n=_e(),i=xt(t);"function"==typeof s.willClose&&s.willClose(t),null===(a=je.eventEmitter)||void 0===a||a.emit("willClose",t),i?Fs(e,t,n,s.returnFocus,s.didClose):Ss(e,n,s.returnFocus,s.didClose)},Fs=(e,t,s,a,n)=>{je.swalCloseEventFinishedCallback=Ss.bind(null,e,s,a,n);const i=function(e){var s;e.target===t&&(null===(s=je.swalCloseEventFinishedCallback)||void 0===s||s.call(je),delete je.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i))};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},_s=(e,t)=>{setTimeout(()=>{var s;"function"==typeof t&&t.bind(e.params)(),null===(s=je.eventEmitter)||void 0===s||s.emit("didClose"),e._destroy&&e._destroy()})},Is=e=>{let t=De();if(t||new gn,t=De(),!t)return;const s=Je();et()?ut(Be()):Ls(t,e),mt(s),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},Ls=(e,t)=>{const s=Ye(),a=Je();s&&a&&(!t&&wt(He())&&(t=He()),mt(s),t&&(ut(t),a.setAttribute("data-button-to-replace",t.className),s.insertBefore(a,t)),rt([e,s],Ce.loading))},Ds=e=>e.checked?1:0,Bs=e=>e.checked?e.value:null,Os=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,Ms=(e,t)=>{const s=De();if(!s)return;const a=e=>{"select"===t.input?function(e,t,s){const a=ct(e,Ce.select);if(!a)return;const n=(e,t,a)=>{const n=document.createElement("option");n.value=a,tt(n,t),n.selected=Ws(a,s.inputValue),e.appendChild(n)};t.forEach(e=>{const t=e[0],s=e[1];if(Array.isArray(s)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,a.appendChild(e),s.forEach(t=>n(e,t[1],t[0]))}else n(a,s,t)}),a.focus()}(s,Us(e),t):"radio"===t.input&&function(e,t,s){const a=ct(e,Ce.radio);if(!a)return;t.forEach(e=>{const t=e[0],n=e[1],i=document.createElement("input"),o=document.createElement("label");i.type="radio",i.name=Ce.radio,i.value=t,Ws(t,s.inputValue)&&(i.checked=!0);const r=document.createElement("span");tt(r,n),r.className=Ce.label,o.appendChild(i),o.appendChild(r),a.appendChild(o)});const n=a.querySelectorAll("input");n.length&&n[0].focus()}(s,Us(e),t)};Ae(t.inputOptions)||Fe(t.inputOptions)?(Is(He()),Te(t.inputOptions).then(t=>{e.hideLoading(),a(t)})):"object"==typeof t.inputOptions?a(t.inputOptions):t.inputOptions},Rs=(e,t)=>{const s=e.getInput();s&&(ut(s),Te(t.inputValue).then(a=>{s.value="number"===t.input?`${parseFloat(a)||0}`:`${a}`,mt(s),s.focus(),e.hideLoading()}).catch(t=>{s.value="",mt(s),s.focus(),e.hideLoading()}))};const Us=e=>{const t=[];return e instanceof Map?e.forEach((e,s)=>{let a=e;"object"==typeof a&&(a=Us(a)),t.push([s,a])}):Object.keys(e).forEach(s=>{let a=e[s];"object"==typeof a&&(a=Us(a)),t.push([s,a])}),t},Ws=(e,t)=>!!t&&t.toString()===e.toString(),Hs=(e,t)=>{const s=$t.innerParams.get(e);if(!s.input)return void ze(t);const a=e.getInput(),n=((e,t)=>{const s=e.getInput();if(!s)return null;switch(t.input){case"checkbox":return Ds(s);case"radio":return Bs(s);case"file":return Os(s);default:return t.inputAutoTrim?s.value.trim():s.value}})(e,s);s.inputValidator?Vs(e,n,t):a&&!a.checkValidity()?(e.enableButtons(),e.showValidationMessage(s.validationMessage||a.validationMessage)):"deny"===t?qs(e,n):Ks(e,n)},Vs=(e,t,s)=>{const a=$t.innerParams.get(e);e.disableInput();Promise.resolve().then(()=>Te(a.inputValidator(t,a.validationMessage))).then(a=>{e.enableButtons(),e.enableInput(),a?e.showValidationMessage(a):"deny"===s?qs(e,t):Ks(e,t)})},qs=(e,t)=>{const s=$t.innerParams.get(e||void 0);if(s.showLoaderOnDeny&&Is(qe()),s.preDeny){e.isAwaitingPromise=!0;Promise.resolve().then(()=>Te(s.preDeny(t,s.validationMessage))).then(s=>{!1===s?(e.hideLoading(),$s(e)):e.close({isDenied:!0,value:void 0===s?t:s})}).catch(t=>Ys(e||void 0,t))}else e.close({isDenied:!0,value:t})},Js=(e,t)=>{e.close({isConfirmed:!0,value:t})},Ys=(e,t)=>{e.rejectPromise(t)},Ks=(e,t)=>{const s=$t.innerParams.get(e||void 0);if(s.showLoaderOnConfirm&&Is(),s.preConfirm){e.resetValidationMessage(),e.isAwaitingPromise=!0;Promise.resolve().then(()=>Te(s.preConfirm(t,s.validationMessage))).then(s=>{wt(We())||!1===s?(e.hideLoading(),$s(e)):Js(e,void 0===s?t:s)}).catch(t=>Ys(e||void 0,t))}else Js(e,t)};function Gs(){const e=$t.innerParams.get(this);if(!e)return;const t=$t.domCache.get(this);ut(t.loader),et()?e.icon&&mt(Be()):Zs(t),lt([t.popup,t.actions],Ce.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Zs=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?mt(t[0],"inline-block"):wt(He())||wt(qe())||wt(Ve())||ut(e.actions)};function Xs(){const e=$t.innerParams.get(this),t=$t.domCache.get(this);return t?nt(t.popup,e.input):null}function Qs(e,t,s){const a=$t.domCache.get(e);t.forEach(e=>{a[e].disabled=s})}function ea(e,t){const s=De();if(s&&e)if("radio"===e.type){const e=s.querySelectorAll(`[name="${Ce.radio}"]`);for(let s=0;s<e.length;s++)e[s].disabled=t}else e.disabled=t}function ta(){Qs(this,["confirmButton","denyButton","cancelButton"],!1)}function sa(){Qs(this,["confirmButton","denyButton","cancelButton"],!0)}function aa(){ea(this.getInput(),!1)}function na(){ea(this.getInput(),!0)}function ia(e){const t=$t.domCache.get(this),s=$t.innerParams.get(this);tt(t.validationMessage,e),t.validationMessage.className=Ce["validation-message"],s.customClass&&s.customClass.validationMessage&&rt(t.validationMessage,s.customClass.validationMessage),mt(t.validationMessage);const a=this.getInput();a&&(a.setAttribute("aria-invalid","true"),a.setAttribute("aria-describedby",Ce["validation-message"]),it(a),rt(a,Ce.inputerror))}function oa(){const e=$t.domCache.get(this);e.validationMessage&&ut(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),lt(t,Ce.inputerror))}const ra={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},la=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],ca={allowEnterKey:void 0},da=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ma=e=>Object.prototype.hasOwnProperty.call(ra,e),ua=e=>-1!==la.indexOf(e),ha=e=>ca[e],pa=e=>{ma(e)},ga=e=>{da.includes(e)},wa=e=>{const t=ha(e);t&&Pe(e,t)},fa=e=>{!1===e.backdrop&&e.allowOutsideClick,e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&e.theme;for(const t in e)pa(t),e.toast&&ga(t),wa(t)};function xa(e){const t=_e(),s=De(),a=$t.innerParams.get(this);if(!s||st(s,a.hideClass.popup))return;const n=ba(e),i=Object.assign({},a,n);fa(i),t.dataset.swal2Theme=i.theme,is(this,i),$t.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const ba=e=>{const t={};return Object.keys(e).forEach(s=>{ua(s)&&(t[s]=e[s])}),t};function va(){const e=$t.domCache.get(this),t=$t.innerParams.get(this);t?(e.popup&&je.swalCloseEventFinishedCallback&&(je.swalCloseEventFinishedCallback(),delete je.swalCloseEventFinishedCallback),"function"==typeof t.didDestroy&&t.didDestroy(),je.eventEmitter.emit("didDestroy"),ya(this)):ja(this)}const ya=e=>{ja(e),delete e.params,delete je.keydownHandler,delete je.keydownTarget,delete je.currentInstance},ja=e=>{e.isAwaitingPromise?(Na($t,e),e.isAwaitingPromise=!0):(Na(fs,e),Na($t,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Na=(e,t)=>{for(const s in e)e[s].delete(t)};var ka=Object.freeze({__proto__:null,_destroy:va,close:zs,closeModal:zs,closePopup:zs,closeToast:zs,disableButtons:sa,disableInput:na,disableLoading:Gs,enableButtons:ta,enableInput:aa,getInput:Xs,handleAwaitingPromise:$s,hideLoading:Gs,rejectPromise:Ps,resetValidationMessage:oa,showValidationMessage:ia,update:xa});const Ca=(e,t,s)=>{t.popup.onclick=()=>{e&&(Sa(e)||e.timer||e.input)||s(rs.close)}},Sa=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let za=!1;const Ea=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(za=!0)}}},Pa=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(za=!0)}}},$a=(e,t,s)=>{t.container.onclick=a=>{za?za=!1:a.target===t.container&&$e(e.allowOutsideClick)&&s(rs.backdrop)}},Aa=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e);const Ta=()=>{if(je.timeout)return(()=>{const e=Ge();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const s=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${s}%`})(),je.timeout.stop()},Fa=()=>{if(je.timeout){const e=je.timeout.start();return bt(e),e}};let _a=!1;const Ia={};const La=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in Ia){const s=t.getAttribute(e);if(s)return void Ia[e].fire({template:s})}};je.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const s=this._getHandlersByEventName(e);s.includes(t)||s.push(t)}once(e,t){const s=(...a)=>{this.removeListener(e,s),t.apply(this,a)};this.on(e,s)}emit(e,...t){this._getHandlersByEventName(e).forEach(e=>{try{e.apply(this,t)}catch(s){}})}removeListener(e,t){const s=this._getHandlersByEventName(e),a=s.indexOf(t);a>-1&&s.splice(a,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var Da=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return"object"!=typeof e[0]||Aa(e[0])?["title","html","icon"].forEach((s,a)=>{const n=e[a];("string"==typeof n||Aa(n))&&(t[s]=n)}):Object.assign(t,e[0]),t},bindClickHandler:function(e="data-swal-template"){Ia[e]=this,_a||(document.body.addEventListener("click",La),_a=!0)},clickCancel:()=>{var e;return null===(e=Ve())||void 0===e?void 0:e.click()},clickConfirm:os,clickDeny:()=>{var e;return null===(e=qe())||void 0===e?void 0:e.click()},enableLoading:Is,fire:function(...e){return new this(...e)},getActions:Ye,getCancelButton:Ve,getCloseButton:Ze,getConfirmButton:He,getContainer:_e,getDenyButton:qe,getFocusableElements:Xe,getFooter:Ke,getHtmlContainer:Me,getIcon:Be,getIconContent:()=>Le(Ce["icon-content"]),getImage:Re,getInputLabel:()=>Le(Ce["input-label"]),getLoader:Je,getPopup:De,getProgressSteps:Ue,getTimerLeft:()=>je.timeout&&je.timeout.getTimerLeft(),getTimerProgressBar:Ge,getTitle:Oe,getValidationMessage:We,increaseTimer:e=>{if(je.timeout){const t=je.timeout.increase(e);return bt(t,!0),t}},isDeprecatedParameter:ha,isLoading:()=>{const e=De();return!!e&&e.hasAttribute("data-loading")},isTimerRunning:()=>!(!je.timeout||!je.timeout.isRunning()),isUpdatableParameter:ua,isValidParameter:ma,isVisible:()=>wt(De()),mixin:function(e){return class extends(this){_main(t,s){return super._main(t,Object.assign({},e,s))}}},off:(e,t)=>{e?t?je.eventEmitter.removeListener(e,t):je.eventEmitter.removeAllListeners(e):je.eventEmitter.reset()},on:(e,t)=>{je.eventEmitter.on(e,t)},once:(e,t)=>{je.eventEmitter.once(e,t)},resumeTimer:Fa,showLoading:Is,stopTimer:Ta,toggleTimer:()=>{const e=je.timeout;return e&&(e.running?Ta():Fa())}});class Ba{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Oa=["swal-title","swal-html","swal-footer"],Ma=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(e=>{Ya(e,["name","value"]);const s=e.getAttribute("name"),a=e.getAttribute("value");s&&a&&(t[s]="boolean"==typeof ra[s]?"false"!==a:"object"==typeof ra[s]?JSON.parse(a):a)}),t},Ra=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(e=>{const s=e.getAttribute("name"),a=e.getAttribute("value");s&&a&&(t[s]=new Function(`return ${a}`)())}),t},Ua=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(e=>{Ya(e,["type","color","aria-label"]);const s=e.getAttribute("type");s&&["confirm","cancel","deny"].includes(s)&&(t[`${s}ButtonText`]=e.innerHTML,t[`show${ze(s)}Button`]=!0,e.hasAttribute("color")&&(t[`${s}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${s}ButtonAriaLabel`]=e.getAttribute("aria-label")))}),t},Wa=e=>{const t={},s=e.querySelector("swal-image");return s&&(Ya(s,["src","width","height","alt"]),s.hasAttribute("src")&&(t.imageUrl=s.getAttribute("src")||void 0),s.hasAttribute("width")&&(t.imageWidth=s.getAttribute("width")||void 0),s.hasAttribute("height")&&(t.imageHeight=s.getAttribute("height")||void 0),s.hasAttribute("alt")&&(t.imageAlt=s.getAttribute("alt")||void 0)),t},Ha=e=>{const t={},s=e.querySelector("swal-icon");return s&&(Ya(s,["type","color"]),s.hasAttribute("type")&&(t.icon=s.getAttribute("type")),s.hasAttribute("color")&&(t.iconColor=s.getAttribute("color")),t.iconHtml=s.innerHTML),t},Va=e=>{const t={},s=e.querySelector("swal-input");s&&(Ya(s,["type","label","placeholder","value"]),t.input=s.getAttribute("type")||"text",s.hasAttribute("label")&&(t.inputLabel=s.getAttribute("label")),s.hasAttribute("placeholder")&&(t.inputPlaceholder=s.getAttribute("placeholder")),s.hasAttribute("value")&&(t.inputValue=s.getAttribute("value")));const a=Array.from(e.querySelectorAll("swal-input-option"));return a.length&&(t.inputOptions={},a.forEach(e=>{Ya(e,["value"]);const s=e.getAttribute("value");if(!s)return;const a=e.innerHTML;t.inputOptions[s]=a})),t},qa=(e,t)=>{const s={};for(const a in t){const n=t[a],i=e.querySelector(n);i&&(Ya(i,[]),s[n.replace(/^swal-/,"")]=i.innerHTML.trim())}return s},Ja=e=>{const t=Oa.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(e=>{const s=e.tagName.toLowerCase();t.includes(s)})},Ya=(e,t)=>{Array.from(e.attributes).forEach(s=>{-1===t.indexOf(s.name)&&(s.name,e.tagName.toLowerCase(),t.length&&t.join(", "))})},Ka=e=>{const t=_e(),s=De();"function"==typeof e.willOpen&&e.willOpen(s),je.eventEmitter.emit("willOpen",s);const a=window.getComputedStyle(document.body).overflowY;Qa(t,s,e),setTimeout(()=>{Za(t,s)},10),Qe()&&(Xa(t,e.scrollbarPadding,a),(()=>{const e=_e();Array.from(document.body.children).forEach(t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})})()),et()||je.previousActiveElement||(je.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout(()=>e.didOpen(s)),je.eventEmitter.emit("didOpen",s),lt(t,Ce["no-transition"])},Ga=e=>{const t=De();if(e.target!==t)return;const s=_e();t.removeEventListener("animationend",Ga),t.removeEventListener("transitionend",Ga),s.style.overflowY="auto"},Za=(e,t)=>{xt(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Ga),t.addEventListener("transitionend",Ga)):e.style.overflowY="auto"},Xa=(e,t,s)=>{(()=>{if(bs&&!st(document.body,Ce.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",rt(document.body,Ce.iosfix),vs()}})(),t&&"hidden"!==s&&Cs(s),setTimeout(()=>{e.scrollTop=0})},Qa=(e,t,s)=>{rt(e,s.showClass.backdrop),s.animation?(t.style.setProperty("opacity","0","important"),mt(t,"grid"),setTimeout(()=>{rt(t,s.showClass.popup),t.style.removeProperty("opacity")},10)):mt(t,"grid"),rt([document.documentElement,document.body],Ce.shown),s.heightAuto&&s.backdrop&&!s.toast&&rt([document.documentElement,document.body],Ce["height-auto"])};var en=(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),tn=(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL");function sn(e){!function(e){e.inputValidator||("email"===e.input&&(e.inputValidator=en),"url"===e.input&&(e.inputValidator=tn))}(e),e.showLoaderOnConfirm&&e.preConfirm,function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),jt(e)}let an;var nn=new WeakMap;class on{constructor(...e){if(ye(this,nn,void 0),"undefined"==typeof window)return;an=this;const t=Object.freeze(this.constructor.argsToParams(e));var s,a,n;this.params=t,this.isAwaitingPromise=!1,s=nn,a=this,n=this._main(an.params),s.set(be(s,a),n)}_main(e,t={}){if(fa(Object.assign({},t,e)),je.currentInstance){const e=fs.swalPromiseResolve.get(je.currentInstance),{isAwaitingPromise:t}=je.currentInstance;je.currentInstance._destroy(),t||e({isDismissed:!0}),Qe()&&xs()}je.currentInstance=an;const s=ln(e,t);sn(s),Object.freeze(s),je.timeout&&(je.timeout.stop(),delete je.timeout),clearTimeout(je.restoreFocusTimeout);const a=cn(an);return is(an,s),$t.innerParams.set(an,s),rn(an,a,s)}then(e){return ve(nn,this).then(e)}finally(e){return ve(nn,this).finally(e)}}const rn=(e,t,s)=>new Promise((a,n)=>{const i=t=>{e.close({isDismissed:!0,dismiss:t})};fs.swalPromiseResolve.set(e,a),fs.swalPromiseReject.set(e,n),t.confirmButton.onclick=()=>{(e=>{const t=$t.innerParams.get(e);e.disableButtons(),t.input?Hs(e,"confirm"):Ks(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=$t.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Hs(e,"deny"):qs(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(rs.cancel)})(e,i)},t.closeButton.onclick=()=>{i(rs.close)},((e,t,s)=>{e.toast?Ca(e,t,s):(Ea(t),Pa(t),$a(e,t,s))})(s,t,i),((e,t,s)=>{ls(e),t.toast||(e.keydownHandler=e=>us(t,e,s),e.keydownTarget=t.keydownListenerCapture?window:De(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(je,s,i),((e,t)=>{"select"===t.input||"radio"===t.input?Ms(e,t):["text","email","number","tel","textarea"].some(e=>e===t.input)&&(Ae(t.inputValue)||Fe(t.inputValue))&&(Is(He()),Rs(e,t))})(e,s),Ka(s),dn(je,s,i),mn(t,s),setTimeout(()=>{t.container.scrollTop=0})}),ln=(e,t)=>{const s=(e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const s=t.content;return Ja(s),Object.assign(Ma(s),Ra(s),Ua(s),Wa(s),Ha(s),Va(s),qa(s,Oa))})(e),a=Object.assign({},ra,t,s,e);return a.showClass=Object.assign({},ra.showClass,a.showClass),a.hideClass=Object.assign({},ra.hideClass,a.hideClass),!1===a.animation&&(a.showClass={backdrop:"swal2-noanimation"},a.hideClass={}),a},cn=e=>{const t={popup:De(),container:_e(),actions:Ye(),confirmButton:He(),denyButton:qe(),cancelButton:Ve(),loader:Je(),closeButton:Ze(),validationMessage:We(),progressSteps:Ue()};return $t.domCache.set(e,t),t},dn=(e,t,s)=>{const a=Ge();ut(a),t.timer&&(e.timeout=new Ba(()=>{s("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(mt(a),at(a,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&bt(t.timer)})))},mn=(e,t)=>{if(!t.toast)return $e(t.allowEnterKey)?void(un(e)||hn(e,t)||cs(-1,1)):(Pe("allowEnterKey"),void pn())},un=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const s of t)if(s instanceof HTMLElement&&wt(s))return s.focus(),!0;return!1},hn=(e,t)=>t.focusDeny&&wt(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&wt(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!wt(e.confirmButton))&&(e.confirmButton.focus(),!0),pn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};on.prototype.disableButtons=sa,on.prototype.enableButtons=ta,on.prototype.getInput=Xs,on.prototype.disableInput=na,on.prototype.enableInput=aa,on.prototype.hideLoading=Gs,on.prototype.disableLoading=Gs,on.prototype.showValidationMessage=ia,on.prototype.resetValidationMessage=oa,on.prototype.close=zs,on.prototype.closePopup=zs,on.prototype.closeModal=zs,on.prototype.closeToast=zs,on.prototype.rejectPromise=Ps,on.prototype.update=xa,on.prototype._destroy=va,Object.assign(on,Da),Object.keys(ka).forEach(e=>{on[e]=function(...t){return an&&an[e]?an[e](...t):null}}),on.DismissReason=rs,on.version="11.23.0";const gn=on;gn.default=gn,"undefined"!=typeof document&&function(e,t){var s=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=t);else try{s.innerHTML=t}catch(e){s.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const wn=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],fn=()=>{};const xn=e.createContext(null),bn=({children:t})=>{const a=e.useMemo(()=>function(e){function t(e){const t={},a={},n=wn.map(e=>e.key);return Object.entries(e).forEach(e=>{let[i,o]=e;n.includes(i)&&s.isValidElement(o)?(t[i]=o,a[i]=" "):a[i]=o}),[t,a]}function a(t,s){Object.entries(s).forEach(s=>{let[a,n]=s;const i=wn.find(e=>e.key===a).getter(e),o=ge(i);o.render(n),t.__roots.push(o)})}function n(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends e{static argsToParams(t){if(s.isValidElement(t[0])||s.isValidElement(t[1])){const e={};return["title","html","icon"].forEach((s,a)=>{void 0!==t[a]&&(e[s]=t[a])}),e}return e.argsToParams(t)}_main(e,s){this.__roots=[],this.__params=Object.assign({},s,e);const[i,o]=t(this.__params),r=o.willOpen||fn,l=o.didOpen||fn,c=o.didDestroy||fn;return super._main(Object.assign({},o,{willOpen:e=>{a(this,i),r(e)},didOpen:e=>{setTimeout(()=>{l(e)})},didDestroy:e=>{c(e),n(this)}}))}update(e){Object.assign(this.__params,e),n(this);const[s,i]=t(this.__params);super.update(i),a(this,s)}}}(gn),[]),n=e.useMemo(()=>a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",gn.stopTimer),e.addEventListener("mouseleave",gn.resumeTimer)}}),[a]),i=e.useCallback((e,{type:t="info",duration:s=4e3}={})=>{const a="error"===t?"error":"success"===t?"success":"warning"===t?"warning":"info";n.fire({icon:a,title:e,timer:s})},[n]),o=e.useCallback(()=>{},[]);return we.jsx(xn.Provider,{value:{showToast:i,removeToast:o},children:t})},vn=({folder:e,onClick:t,onEdit:s,onDelete:n,isLocked:i,hasMembers:o,fileCount:r,folderSize:l,totalItems:c,subfolderCount:d,isUnlocked:m})=>{const u=o?Math.floor(10*Math.random())+1:0;return we.jsx(D,{className:"folder-card h-100 fade-in",role:"button",onClick:()=>t(e),children:we.jsxs(B,{className:"p-3",children:[we.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsx("div",{className:"storage-icon documents",children:we.jsx(a,{size:18})}),we.jsxs("div",{className:"flex-grow-1 min-width-0",children:[we.jsxs("h6",{className:"mb-0 fw-semibold text-truncate",children:[e.name,c>0&&we.jsxs("span",{className:"text-muted fw-normal ms-2",children:["(",c," item",1!==c?"s":"",")"]})]}),we.jsxs("div",{className:"d-flex flex-column",children:[(r>0||d>0)&&we.jsxs("small",{className:"text-muted",children:[r>0&&`${r} file${1!==r?"s":""}`,r>0&&d>0&&"  ",d>0&&`${d} folder${1!==d?"s":""}`]}),l>0&&we.jsxs("small",{className:"text-muted fw-semibold",style:{color:"#059669",fontSize:"0.8rem"},children:[" ",(h=l,h&&0!==h?h<1024?`${Math.round(h)} B`:h<1048576?`${(h/1024).toFixed(1)} KB`:h<1073741824?`${(h/1048576).toFixed(1)} MB`:`${(h/1073741824).toFixed(1)} GB`:"0 B")]})]})]})]}),i&&we.jsx(O,{color:"warning",className:"small",children:"Locked"})]}),u>0&&we.jsx("div",{className:"d-flex align-items-center justify-content-between",children:we.jsxs("div",{className:"d-flex align-items-center gap-1",children:[we.jsx("div",{className:"d-flex",style:{marginLeft:"-4px"},children:[...Array(Math.min(u,3))].map((e,t)=>we.jsx("div",{className:"rounded-circle bg-primary d-flex align-items-center justify-content-center text-white",style:{width:"24px",height:"24px",fontSize:"10px",marginLeft:t>0?"-4px":"0",zIndex:3-t,border:"2px solid white"},children:String.fromCharCode(65+t)},t))}),u>3&&we.jsxs("span",{className:"small text-muted ms-1",children:["+",u-3]})]})})]})});var h},yn=({files:e=[]})=>{const t=(e=>{const t={documents:{count:0,size:0,icon:g,color:"#6B7280",bgColor:"#F3F4F6"},photos:{count:0,size:0,icon:p,color:"#3B82F6",bgColor:"#DBEAFE"},audio:{count:0,size:0,icon:h,color:"#10B981",bgColor:"#D1FAE5"},videos:{count:0,size:0,icon:u,color:"#F59E0B",bgColor:"#FEF3C7"}};return e.forEach(e=>{const s=e.type||"",a=e.size||0;s.startsWith("image/")?(t.photos.count++,t.photos.size+=a):s.startsWith("audio/")?(t.audio.count++,t.audio.size+=a):s.startsWith("video/")?(t.videos.count++,t.videos.size+=a):(t.documents.count++,t.documents.size+=a)}),t})(e);return we.jsx("div",{className:"row g-3 mb-4",children:Object.entries(t).map(([e,t],s)=>{const a=t.icon,n=(i=t.size)<1024?`${i} B`:i<1048576?`${(i/1024).toFixed(1)} KB`:i<1073741824?`${(i/1048576).toFixed(1)} MB`:`${(i/1073741824).toFixed(1)} GB`;var i;return we.jsx("div",{className:"col-md-3 col-sm-6",children:we.jsx(D,{className:"h-100 border-0 shadow-sm hover-lift hover-glow scale-in stagger-item",style:{animationDelay:150*s+"ms"},children:we.jsxs(B,{className:"p-4",children:[we.jsx("div",{className:"d-flex align-items-center justify-content-between mb-3",children:we.jsx("div",{className:"rounded-3 p-3 d-flex align-items-center justify-content-center",style:{backgroundColor:t.bgColor,width:"56px",height:"56px"},children:we.jsx(a,{size:24,style:{color:t.color}})})}),we.jsxs("div",{children:[we.jsxs("div",{className:"h5 fw-bold mb-1 counter-animate",style:{color:t.color},children:["Total ",n]}),we.jsx("div",{className:"text-capitalize fw-semibold mb-0 slide-up",children:e}),we.jsxs("small",{className:"text-muted fade-in",children:[t.count," files"]})]})]})})},e)})})},jn=({files:e=[],onFileClick:t,onViewAll:s,onUpload:a,onFileDelete:w,onToggleFavorite:f,isFavorited:x})=>{const b=e.sort((e,t)=>new Date(t.uploadDate||t.createdAt)-new Date(e.uploadDate||e.createdAt)).slice(0,6),v=e=>{const t=e.type||"";return t.startsWith("image/")?we.jsx(p,{size:16,className:"text-primary"}):t.includes("pdf")?we.jsx(g,{size:16,className:"text-danger"}):t.includes("document")?we.jsx(g,{size:16,className:"text-primary"}):t.startsWith("video/")?we.jsx(u,{size:16,className:"text-warning"}):t.startsWith("audio/")?we.jsx(h,{size:16,className:"text-success"}):we.jsx(r,{size:16,className:"text-muted"})};return we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"p-0",children:[we.jsx("div",{className:"p-4 border-bottom",children:we.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[we.jsx("h5",{className:"mb-0 fw-bold",children:"Recent Files"}),we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsxs("button",{className:"btn btn-sm btn-primary hover-lift",onClick:a,title:"Upload Files",children:[we.jsx(n,{size:14,className:"me-1",style:{transition:"transform 0.2s ease"},onMouseEnter:e=>e.target.style.transform="rotate(10deg)",onMouseLeave:e=>e.target.style.transform="rotate(0deg)"}),"Upload"]}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary",children:we.jsx(i,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary",children:we.jsx(o,{size:14})})]})]})}),we.jsx("div",{className:"p-4",children:we.jsx("div",{className:"row g-3",children:0===b.length?we.jsxs("div",{className:"col-12 text-center py-4 text-muted",children:[we.jsx(r,{size:32,className:"mb-2 opacity-50"}),we.jsx("div",{children:"No recent files"})]}):b.map((e,s)=>{return we.jsx("div",{className:"col-md-6 col-lg-4",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>t&&t(e),style:{animationDelay:100*s+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsx("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"120px",backgroundColor:"#f8f9fa"},children:e.type?.startsWith("image/")&&e.url?we.jsx("img",{src:e.url,alt:e.name,className:"img-fluid rounded-2",style:{maxHeight:"100%",maxWidth:"100%",objectFit:"cover"}}):we.jsxs("div",{className:"text-center",children:[v(e),we.jsx("div",{className:"mt-2",children:we.jsx("small",{className:"text-muted text-uppercase",children:e.name?.split(".").pop()||"FILE"})})]})}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:we.jsxs("span",{children:["Last Modified on ",(a=e.uploadDate||e.createdAt,a?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(new Date(a)):"Unknown")]})})]}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:[we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:s=>{s.stopPropagation(),t&&t(e)},title:"Preview File",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:e=>e.stopPropagation(),title:"Download File",children:we.jsx(c,{size:14})}),we.jsx("button",{className:"btn btn-sm d-flex align-items-center gap-1 "+(x&&x(e)?"btn-warning":"btn-outline-warning"),onClick:t=>{t.stopPropagation(),f&&f(e)},title:x&&x(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:x&&x(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),w&&w(e)},title:"Delete File",children:we.jsx(m,{size:14})})]}),we.jsx("small",{className:"text-muted",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]})]})})},e._id||e.id||s);var a})})})]})})},Nn=({files:e=[]})=>{const t=e=>e<1073741824?`${(e/1048576).toFixed(1)} MB`:`${(e/1073741824).toFixed(1)} GB`,s=e.reduce((e,t)=>e+(t.size||0),0);const a=s/21474836480*100,n=e.reduce((e,t)=>{const s=t.type||"",a=t.size||0;return s.startsWith("video/")?e.video+=a:s.startsWith("audio/")?e.audio+=a:s.startsWith("image/")?e.photos+=a:e.documents+=a,e},{video:0,audio:0,photos:0,documents:0});return we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"p-4",children:[we.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[we.jsxs("div",{children:[we.jsx("h6",{className:"mb-1",children:"Storage Usage"}),we.jsx(O,{color:"success",className:"small",children:we.jsxs("div",{className:"d-flex align-items-center gap-1",children:[we.jsx("div",{className:"bg-success rounded-circle",style:{width:"6px",height:"6px"}}),"Live"]})})]}),we.jsxs("div",{className:"text-muted small",children:[a.toFixed(1),"% of 20GB used"]})]}),we.jsx("div",{className:"text-center mb-4",children:we.jsxs("div",{className:"position-relative d-inline-block",children:[we.jsxs("svg",{width:"200",height:"200",className:"donut-chart",children:[we.jsx("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#f1f5f9",strokeWidth:"20"}),we.jsx("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"url(#gradient1)",strokeWidth:"20",strokeDasharray:`${2*Math.PI*70*(a/100)} ${2*Math.PI*70}`,strokeLinecap:"round",transform:"rotate(-90 100 100)"}),we.jsx("defs",{children:we.jsxs("linearGradient",{id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[we.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)"}),we.jsx("stop",{offset:"50%",stopColor:"var(--color-accent)"}),we.jsx("stop",{offset:"100%",stopColor:"#059669"})]})})]}),we.jsxs("div",{className:"position-absolute top-50 start-50 translate-middle text-center",children:[we.jsxs("div",{className:"h5 fw-bold mb-1",children:[a.toFixed(1),"%"]}),we.jsx("small",{className:"text-muted",children:"Used"}),we.jsx("div",{className:"mt-1",children:we.jsx("small",{className:"text-muted",children:t(s)})})]})]})}),we.jsxs("div",{className:"mb-4",children:[we.jsx("h6",{className:"fw-bold mb-3",children:"Overview"}),we.jsx("div",{className:"row g-2",children:[{label:"Videos",value:t(n.video),color:"var(--color-danger)"},{label:"Audio",value:t(n.audio),color:"var(--color-primary)"},{label:"Photos",value:t(n.photos),color:"var(--color-accent)"},{label:"Documents",value:t(n.documents),color:"var(--color-warning)"}].map((e,t)=>we.jsx("div",{className:"col-6",children:we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsx("div",{className:"rounded-circle",style:{width:"12px",height:"12px",backgroundColor:e.color}}),we.jsxs("div",{className:"flex-grow-1 min-width-0",children:[we.jsx("small",{className:"text-muted",children:e.label}),we.jsx("div",{className:"fw-semibold small",children:e.value})]})]})},t))})]})]})})},kn=({files:e=[]})=>{const t=e.sort((e,t)=>(t.size||0)-(e.size||0)).slice(0,5),s=e=>{const t=e.type||"";return t.startsWith("video/")?we.jsx(u,{size:16,className:"text-warning"}):t.startsWith("image/")?we.jsx(p,{size:16,className:"text-primary"}):t.startsWith("audio/")?we.jsx(h,{size:16,className:"text-success"}):we.jsx(g,{size:16,className:"text-muted"})};return we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"p-0",children:[we.jsx("div",{className:"p-4 border-bottom",children:we.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[we.jsx("h6",{className:"mb-0 fw-bold",children:"Largest files"}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary",children:we.jsx(i,{size:14})})]})}),we.jsx("div",{className:"p-4",children:0===t.length?we.jsxs("div",{className:"text-center py-4 text-muted",children:[we.jsx(r,{size:32,className:"mb-2 opacity-50"}),we.jsx("div",{children:"No files"})]}):we.jsx("div",{className:"d-flex flex-column gap-3",children:t.map((e,t)=>{return we.jsxs("div",{className:"d-flex align-items-center gap-3 p-2 rounded-2 hover-bg-light",role:"button",children:[s(e),we.jsx("div",{className:"flex-grow-1 min-width-0",children:we.jsx("div",{className:"fw-semibold text-truncate small",children:e.name})}),we.jsx("div",{className:"text-end",children:we.jsx("div",{className:"fw-semibold small",children:(a=e.size||0,a<1048576?`${Math.round(a/1024)} KB`:a<1073741824?`${Math.round(a/1048576)} MB`:`${(a/1073741824).toFixed(1)} GB`)})})]},e._id||e.id||t);var a})})})]})})},Cn=({user:t,onClose:s,onPhotoUpdate:a,showToast:i,token:o})=>{const[r,l]=e.useState(null),[c,d]=e.useState(t?.profilePhoto||null),[u,h]=e.useState(!1),[p,g]=e.useState(""),v=e.useRef(null),y="/api",j=e.useCallback(e=>{const t=e.target.files?.[0];if(!t)return;const s=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".heic",".heif"],a=t.name.toLowerCase(),n=a.substring(a.lastIndexOf(".")),i=t.type&&["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/heic","image/heif"].includes(t.type.toLowerCase()),o=s.includes(n);if(!i&&!o)return void g(`Please select a valid image file (${s.join(", ")})`);if(t.size>20971520)return void g("Image size must be less than 20MB");g(""),l(t);const r=new FileReader;r.onload=e=>{d(e.target.result)},r.readAsDataURL(t)},[]),N=e.useCallback(e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files;if(t.length>0){const e=t[0],s=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/heic","image/heif"],a=[".jpg",".jpeg",".png",".gif",".webp",".bmp",".heic",".heif"],n=e.name.toLowerCase(),i=n.substring(n.lastIndexOf(".")),o=e.type&&s.includes(e.type.toLowerCase()),r=a.includes(i);o||r?j({target:{files:[e]}}):g(`Please drop a valid image file (${a.join(", ")})`)}},[j]),k=e=>new Promise(t=>{const s=new FileReader;s.onload=e=>t(e.target.result),s.readAsDataURL(e)}),C=e=>new Promise(t=>{const s=document.createElement("canvas"),a=s.getContext("2d"),n=new Image;n.onload=()=>{const e=1024;let{width:i,height:o}=n;i>o?i>e&&(o=o*e/i,i=e):o>e&&(i=i*e/o,o=e);const r=window.devicePixelRatio||1;s.width=i*r,s.height=o*r,s.style.width=i+"px",s.style.height=o+"px",a.scale(r,r),a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(n,0,0,i,o),s.toBlob(t,"image/jpeg",.95)},n.src=URL.createObjectURL(e)});return we.jsxs(M,{visible:!0,onClose:s,alignment:"center",size:"lg",children:[we.jsx(R,{children:we.jsxs(U,{className:"d-flex align-items-center gap-2",children:[we.jsx(w,{size:20}),"Profile Photo"]})}),we.jsx(W,{children:we.jsxs("div",{className:"text-center",children:[we.jsx("div",{className:"mb-4",children:we.jsx("div",{className:"position-relative d-inline-block",children:c?we.jsxs("div",{className:"position-relative",children:[we.jsx("img",{src:c,alt:"Profile preview",className:"rounded-circle border",style:{width:"180px",height:"180px",objectFit:"cover",border:"3px solid var(--color-border-glass)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",imageRendering:"high-quality"}}),r&&we.jsx("div",{className:"position-absolute top-0 end-0",children:we.jsx("button",{type:"button",className:"btn btn-sm btn-danger rounded-circle p-1",onClick:()=>{l(null),d(t?.profilePhoto||null),g(""),v.current&&(v.current.value="")},style:{width:"24px",height:"24px"},children:we.jsx(f,{size:12})})})]}):we.jsx("div",{className:"rounded-circle border d-flex align-items-center justify-content-center bg-light",style:{width:"180px",height:"180px",border:"3px solid var(--color-border-glass)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:we.jsx(x,{size:72,className:"text-muted"})})})}),we.jsxs("div",{className:"border-2 border-dashed rounded-3 p-4 mb-3 text-center",style:{borderColor:r?"var(--color-primary)":"var(--color-border)",backgroundColor:r?"rgba(102, 126, 234, 0.05)":"var(--color-bg-light)"},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:N,children:[we.jsx("input",{ref:v,type:"file",accept:"image/*,.heic,.heif",onChange:j,className:"d-none"}),we.jsx(n,{size:32,className:"text-muted mb-2"}),we.jsx("div",{className:"h6 mb-2",children:r?"New photo selected":"Choose a profile photo"}),we.jsx("div",{className:"text-muted small mb-3",children:"Drag and drop an image here, or click to browse"}),we.jsxs("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>v.current?.click(),disabled:u,children:[we.jsx(n,{size:16,className:"me-1"}),"Browse Files"]}),we.jsx("div",{className:"text-muted small mt-2",children:"Supports JPG, JPEG, PNG, GIF, WebP, BMP, HEIC, HEIF. Max size 20MB."})]}),p&&we.jsx(H,{color:"danger",className:"py-2 text-start",children:p}),we.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[r&&we.jsx("button",{type:"button",className:"btn btn-success",onClick:async()=>{if(r||c){h(!0),g("");try{let n=c;if(r){const e=await C(r);n=await k(e)}try{const e=new FormData;if(r){const t=await C(r);e.append("profilePhoto",t)}const t=await fetch(`${y}/auth/profile-photo`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:e});if(t.ok){const e=await t.json();return a&&a(e.profilePhoto),i?.("Profile photo updated successfully!",{type:"success"}),void s()}}catch(e){}const l=`profilePhoto_${t?.email||t?.id||"default"}`;localStorage.setItem(l,n),a&&a(n),i?.("Profile photo updated successfully! (Stored locally)",{type:"success"}),s()}catch(err){g(err.message||"Failed to upload profile photo"),i?.(`Upload failed: ${err.message}`,{type:"error"})}finally{h(!1)}}else g("Please select an image first")},disabled:u,children:u?we.jsxs(we.Fragment,{children:[we.jsx(V,{size:"sm",className:"me-1"}),"Uploading..."]}):we.jsxs(we.Fragment,{children:[we.jsx(n,{size:16,className:"me-1"}),"Upload Photo"]})}),c&&t?.profilePhoto&&!r&&we.jsxs(we.Fragment,{children:[we.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>v.current?.click(),disabled:u,children:[we.jsx(b,{size:16,className:"me-1"}),"Change Photo"]}),we.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:async()=>{h(!0),g("");try{try{if((await fetch(`${y}/auth/profile-photo`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})).ok)return a&&a(null),i?.("Profile photo deleted successfully!",{type:"success"}),void s()}catch(e){}const n=`profilePhoto_${t?.email||t?.id||"default"}`;localStorage.removeItem(n),a&&a(null),i?.("Profile photo deleted successfully! (Removed locally)",{type:"success"}),s()}catch(err){g(err.message||"Failed to delete profile photo"),i?.(`Delete failed: ${err.message}`,{type:"error"})}finally{h(!1)}},disabled:u,children:u?we.jsxs(we.Fragment,{children:[we.jsx(V,{size:"sm",className:"me-1"}),"Deleting..."]}):we.jsxs(we.Fragment,{children:[we.jsx(m,{size:16,className:"me-1"}),"Delete Photo"]})})]})]}),we.jsx("div",{className:"text-muted small mt-3",children:"Your profile photo will be visible to other team members and in shared folders."})]})}),we.jsx(q,{children:we.jsx(J,{color:"secondary",variant:"outline",onClick:s,children:"Cancel"})})]})};class Sn extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){if(this.state.hasError){const e=!1;return we.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center p-4",children:we.jsx(D,{className:"shadow-sm",style:{maxWidth:"500px",width:"100%"},children:we.jsxs(B,{className:"text-center p-4",children:[we.jsxs("div",{className:"mb-4",children:[we.jsx(v,{size:64,className:"text-warning mb-3"}),we.jsx("h3",{className:"text-danger mb-2",children:"Oops! Something went wrong"}),we.jsx("p",{className:"text-muted",children:"We encountered an unexpected error. This usually happens when there's a problem loading data or rendering the interface."})]}),e,we.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[we.jsxs(J,{color:"primary",onClick:this.handleReset,className:"d-flex align-items-center gap-2",children:[we.jsx(y,{size:16}),"Try Again"]}),we.jsxs(J,{color:"outline-secondary",onClick:()=>window.location.reload(),className:"d-flex align-items-center gap-2",children:[we.jsx(j,{size:16}),"Reload Page"]})]}),we.jsx("div",{className:"mt-4",children:we.jsx("small",{className:"text-muted",children:"If this problem persists, try refreshing the page or clearing your browser cache."})})]})})})}return this.props.children}}const zn=new class{constructor(){this.workers=new Map,this.workerPools=new Map,this.taskQueue=new Map,this.activeJobs=new Map,this.workerStats=new Map,this.cpuCores=navigator.hardwareConcurrency||4,this.workerConfigs={fileProcessor:{script:new URL("/assets/fileProcessor-FUSmGNhb.js",import.meta.url),poolSize:Math.min(this.cpuCores,4),maxRetries:3,timeout:3e4},faceRecognition:{script:new URL("/assets/faceRecognition-C7Luxoac.js",import.meta.url),poolSize:Math.min(this.cpuCores,2),maxRetries:2,timeout:45e3}},this.initialized=!1,this.initPromise=null}async initialize(){if(!this.initialized){if(this.initPromise)return this.initPromise;this.initPromise=this.doInitialize(),await this.initPromise,this.initialized=!0}}async doInitialize(){for(const[e,t]of Object.entries(this.workerConfigs))await this.createWorkerPool(e,t);this.startPerformanceMonitoring()}async createWorkerPool(e,t){const s=[],a={created:Date.now(),tasksCompleted:0,tasksErrored:0,totalProcessingTime:0,averageProcessingTime:0,activeWorkers:0};for(let i=0;i<t.poolSize;i++)try{const a={id:`${e}-${i}`,worker:new Worker(t.script,{type:"module",name:`${e}-${i}`}),busy:!1,tasksProcessed:0,errors:0,created:Date.now(),lastUsed:null};this.setupWorkerHandlers(a,e),s.push(a)}catch(n){}this.workerPools.set(e,s),this.workerStats.set(e,a),this.taskQueue.set(e,[])}setupWorkerHandlers(e,t){const{worker:s,id:a}=e;s.addEventListener("message",e=>{const{type:s,taskId:n,result:i,error:o,processingTime:r}=e.data;switch(s){case"result":case"task_complete":this.handleTaskComplete(a,t,n,i,r);break;case"error":case"task_error":this.handleTaskError(a,t,n,o,r)}}),s.addEventListener("error",s=>{this.handleWorkerError(e,t,s)}),s.addEventListener("messageerror",e=>{})}async executeTask(e,t,s,a={}){await this.initialize();const n=`${e}_${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i=a.timeout||this.workerConfigs[e]?.timeout||3e4;return new Promise((o,r)=>{const l={taskId:n,workerType:e,operation:t,data:s,options:a,resolve:o,reject:r,created:Date.now(),retries:0,maxRetries:this.workerConfigs[e]?.maxRetries||3};l.timeoutId=setTimeout(()=>{this.handleTaskTimeout(l)},i),this.activeJobs.set(n,l);if(!this.tryAssignTask(l)){(this.taskQueue.get(e)||[]).push(l)}})}tryAssignTask(e){const t=this.workerPools.get(e.workerType);if(!t)return!1;const s=t.find(e=>!e.busy);return!!s&&(this.assignTaskToWorker(e,s),!0)}assignTaskToWorker(e,t){t.busy=!0,t.lastUsed=Date.now(),t.currentTask=e.taskId;const s={type:e.operation,data:e.data,options:e.options,taskId:e.taskId};t.worker.postMessage(s)}handleTaskComplete(e,t,s,a,n){const i=this.activeJobs.get(s);i&&(i.timeoutId&&clearTimeout(i.timeoutId),this.updateWorkerStats(t,e,n,!1),this.markWorkerAvailable(t,e),i.resolve(a),this.activeJobs.delete(s),this.processNextTask(t))}handleTaskError(e,t,s,a,n){const i=this.activeJobs.get(s);if(i){if(this.updateWorkerStats(t,e,n,!0),this.markWorkerAvailable(t,e),i.retries<i.maxRetries){i.retries++;if(!this.tryAssignTask(i)){(this.taskQueue.get(t)||[]).unshift(i)}return}i.timeoutId&&clearTimeout(i.timeoutId),i.reject(new Error(`Task failed after ${i.maxRetries} retries: ${a}`)),this.activeJobs.delete(s),this.processNextTask(t)}}handleTaskTimeout(e){const t=this.workerPools.get(e.workerType);if(t){const s=t.find(t=>t.currentTask===e.taskId);s&&this.markWorkerAvailable(e.workerType,s.id)}if(e.retries<e.maxRetries){e.retries++;if(!this.tryAssignTask(e)){(this.taskQueue.get(e.workerType)||[]).unshift(e)}}else e.reject(new Error(`Task timed out after ${e.maxRetries} retries`)),this.activeJobs.delete(e.taskId)}markWorkerAvailable(e,t){const s=this.workerPools.get(e);if(!s)return;const a=s.find(e=>e.id===t);a&&(a.busy=!1,a.currentTask=null)}processNextTask(e){const t=this.taskQueue.get(e);if(!t||0===t.length)return;const s=t.shift();this.tryAssignTask(s)||t.unshift(s)}updateWorkerStats(e,t,s,a){const n=this.workerStats.get(e),i=this.workerPools.get(e);if(n&&i){a?n.tasksErrored++:(n.tasksCompleted++,n.totalProcessingTime+=s||0,n.averageProcessingTime=n.totalProcessingTime/n.tasksCompleted);const e=i.find(e=>e.id===t);e&&(a?e.errors++:e.tasksProcessed++)}}handleWorkerError(e,t,s){this.recreateWorker(e,t)}async recreateWorker(e,t){const s=this.workerConfigs[t],a=this.workerPools.get(t);if(s&&a)try{e.worker.terminate();const n=new Worker(s.script,{type:"module",name:e.id}),i={...e,worker:n,busy:!1,currentTask:null,created:Date.now()};this.setupWorkerHandlers(i,t);const o=a.findIndex(t=>t.id===e.id);-1!==o&&(a[o]=i)}catch(n){}}startPerformanceMonitoring(){setInterval(()=>{this.logPerformanceStats()},3e4)}logPerformanceStats(){for(const[e,t]of this.workerStats.entries()){const t=this.workerPools.get(e);t&&t.filter(e=>e.busy).length,this.taskQueue.get(e)}}getStats(){const e={};for(const[t,s]of this.workerStats.entries()){const a=this.workerPools.get(t),n=a?a.filter(e=>e.busy).length:0,i=this.taskQueue.get(t)?.length||0;e[t]={...s,activeWorkers:n,queueLength:i,totalWorkers:a?.length||0,successRate:s.tasksCompleted/(s.tasksCompleted+s.tasksErrored)||0}}return e}async processFile(e,t,s){return this.executeTask("fileProcessor","process_file",{file:t,operation:e,options:s},s)}async detectFaces(e,t){return this.executeTask("faceRecognition","detect_faces",e,t)}async generateFaceDescriptor(e,t){return this.executeTask("faceRecognition","generate_descriptor",e,t)}async matchFaces(e,t,s){return this.executeTask("faceRecognition","match_faces",{targetDescriptor:e,candidateDescriptors:t},s)}async validateFace(e,t){return this.executeTask("faceRecognition","validate_face",e,t)}destroy(){for(const e of this.activeJobs.values())e.timeoutId&&clearTimeout(e.timeoutId);for(const e of this.workerPools.values())for(const t of e)t.worker.terminate();this.workers.clear(),this.workerPools.clear(),this.taskQueue.clear(),this.activeJobs.clear(),this.workerStats.clear(),this.initialized=!1}};const En=(e,t)=>(e=>btoa(`hashed_${e}_salted`))(e)===t,Pn=({onSignIn:t,onSignUp:s})=>{const[a,n]=e.useState(!1),[i,o]=e.useState(""),[r,l]=e.useState(""),[c,d]=e.useState(""),m=async()=>{if(i&&r)try{a?await s(i,r):await t(i,r)}catch(e){d(e.message)}};return we.jsx(Q,{className:"min-vh-100 d-flex align-items-center justify-content-center py-4",children:we.jsx(ee,{className:"w-100 justify-content-center",children:we.jsx(te,{xs:12,sm:10,md:8,lg:5,xl:4,children:we.jsxs(D,{className:"shadow-sm",children:[we.jsxs(se,{className:"text-center py-4",children:[we.jsx(ae,{color:"primary",textColor:"white",children:"SFM"}),we.jsx("h3",{className:"mt-2 mb-0",children:"Secure File Manager"}),we.jsx("small",{className:"text-body-secondary",children:"Your files, protected and organized"})]}),we.jsx(B,{children:we.jsxs(ne,{onSubmit:e=>{e.preventDefault(),m()},children:[we.jsxs("div",{className:"mb-3",children:[we.jsx("label",{className:"form-label",children:"Email"}),we.jsx(ie,{type:"email",value:i,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),required:!0,autoFocus:!0})]}),we.jsxs("div",{className:"mb-3",children:[we.jsx("label",{className:"form-label",children:"Password"}),we.jsx(ie,{type:"password",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),required:!0})]}),c&&we.jsx(H,{color:"danger",className:"text-center py-2",children:c}),we.jsx(J,{color:"primary",className:"w-100 mt-2",size:"lg",onClick:m,children:a?"Sign Up":"Sign In"}),we.jsx("div",{className:"text-center mt-3",children:we.jsx(J,{color:"link",className:"text-decoration-none",onClick:()=>n(!a),children:a?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})})]})})})})},$n=({folder:t,onClose:s,onUnlock:a,user:n,token:i})=>{const[o,r]=e.useState(""),[l,c]=e.useState(0),[d,m]=e.useState(""),[u,h]=e.useState(!1),[p,g]=e.useState(""),[w,f]=e.useState(!1),[b,v]=e.useState(0),[y,j]=e.useState(!0),[N,k]=e.useState(!1),C=async()=>{h(!0),g(""),f(!1),v(0);try{const e=[10,25,40,55,70,85,100];for(let t=0;t<e.length;t++)await new Promise(e=>setTimeout(e,500)),v(e[t]);f(!0),g(""),setTimeout(()=>{h(!1),a()},1500)}catch(e){v(0),g(` Demo face unlock error: ${e.message}`),h(!1)}},S=async(e=!1)=>{if(h(!0),g(""),f(!1),v(0),y||!e)return await C();let s=null,o=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return k(!1),g(" Camera not supported by this browser. Using demo mode."),await C();await zn.initialize(),v(15);const e=`sfm_face_descriptor_${n?.id||n?.email||"anon"}`,m=`sfm_face_descriptors_${n?.id||n?.email||"anon"}`;let u=[];const p=localStorage.getItem(m);if(p)try{u=JSON.parse(p)||[]}catch(r){}if(0===u.length){const t=localStorage.getItem(e);if(t)try{u=[JSON.parse(t)]}catch(r){}}if(0===u.length)return g(" No face registered yet. For demo purposes, face unlock will be simulated."),await C();s=document.createElement("video"),s.autoplay=!0,s.playsInline=!0,s.width=640,s.height=480,s.style.position="fixed",s.style.top="-9999px",document.body.appendChild(s);try{o=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}})}catch(l){return k(!1),g(" Camera access denied or unavailable. Using demo face unlock instead."),s&&s.parentNode&&s.parentNode.removeChild(s),await C()}s.srcObject=o,await new Promise((e,t)=>{s.onloadedmetadata=()=>e(),s.onerror=()=>t(new Error("Failed to load camera stream")),setTimeout(()=>t(new Error("Camera loading timeout")),1e4)}),v(25),await new Promise(e=>{const t=setInterval(()=>{v(e=>{const s=e+5;return s>=45?(clearInterval(t),45):s})},100);setTimeout(()=>{clearInterval(t),v(50),e()},1e3)}),v(60);const w=document.createElement("canvas");w.width=s.videoWidth,w.height=s.videoHeight;w.getContext("2d").drawImage(s,0,0);const x=await new Promise(e=>{w.toBlob(e,"image/jpeg",.9)});v(70);let b=null;try{b=await zn.detectFaces(x,{minConfidence:.3,inputSize:416,timeout:1e4}),v(85),b&&0!==b.length||(b=await zn.detectFaces(x,{minConfidence:.2,inputSize:320,timeout:8e3}))}catch(c){return v(0),g(` Face detection error: ${c.message}`),void h(!1)}if(!b||0===b.length)return v(0),g(" No face detected. Please ensure:\n Your face is clearly visible\n You're looking at the camera\n There's adequate lighting\n Try clicking 'Face Unlock' again"),h(!1),void(i&&fetch("/api/unlock-attempts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({folderId:t._id||t.id,success:!1,method:"face"})}).catch(()=>{}));v(90);const y=b[0];let j=null;try{const e=u.map((e,t)=>({id:t,descriptor:e}));j=await zn.matchFaces(y.descriptor,e,{returnBestMatch:!0,threshold:.6,timeout:5e3})}catch(d){return v(0),g(` Face matching error: ${d.message}`),void h(!1)}const N=j&&j.isMatch,S=j?j.confidence:0;if(i&&fetch("/api/unlock-attempts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({folderId:t._id||t.id,success:N,method:"face",confidence:S,multicore:!0,detectedFaces:b?.length||0})}).catch(()=>{}),N)v(100),f(!0),g(""),setTimeout(()=>{h(!1),a()},1500);else{v(0);const e=Math.round(100*S);g(` Face not recognized (confidence: ${e}%). Please try again or use PIN.`)}}catch(m){v(0),g(` Face unlock error: ${m.message}`)}finally{o&&o.getTracks().forEach(e=>e.stop()),s&&s.parentNode&&s.parentNode.removeChild(s),w||h(!1)}},z=()=>{const e=En(o,t.pinHash);i&&fetch("/api/unlock-attempts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({folderId:t._id||t.id,success:e,method:"pin"})}).catch(()=>{}),e?a():(c(e=>e+1),m(` Incorrect PIN. ${5-l-1} attempts remaining`),r(""),l>=4&&(m(" Too many failed attempts. Please try again later."),setTimeout(s,2e3)))};return we.jsxs(M,{visible:!0,onClose:s,alignment:"center",children:[we.jsx(R,{children:we.jsxs(U,{children:["Unlock ",t.name,""]})}),we.jsxs(W,{children:[u&&we.jsx("div",{className:"mb-4",children:we.jsxs("div",{className:"face-scanner-container "+(w?"success-state":""),children:[we.jsxs("div",{className:"face-scanner-frame",children:[we.jsxs("div",{className:"scanner-overlay "+(w?"success":""),children:[we.jsx("div",{className:"scanner-corner top-left"}),we.jsx("div",{className:"scanner-corner top-right"}),we.jsx("div",{className:"scanner-corner bottom-left"}),we.jsx("div",{className:"scanner-corner bottom-right"}),!w&&we.jsx("div",{className:"scanner-line"})]}),we.jsx("div",{className:"face-icon-container",children:w?we.jsx("div",{className:"success-checkmark",children:we.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",children:[we.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"var(--color-success)",className:"checkmark-circle"}),we.jsx("path",{d:"M8 12l3 3 5-5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"checkmark-path"})]})}):we.jsx(x,{size:48,className:"face-icon pulse-animation"})}),!w&&we.jsxs("div",{className:"scanning-rings",children:[we.jsx("div",{className:"ring ring-1"}),we.jsx("div",{className:"ring ring-2"}),we.jsx("div",{className:"ring ring-3"})]}),w&&we.jsxs("div",{className:"success-particles",children:[we.jsx("div",{className:"particle particle-1"}),we.jsx("div",{className:"particle particle-2"}),we.jsx("div",{className:"particle particle-3"}),we.jsx("div",{className:"particle particle-4"})]})]}),we.jsxs("div",{className:"text-center mt-3",children:[we.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2 mb-2",children:[w?we.jsx("div",{className:"success-dot"}):we.jsx("div",{className:"scanning-dot"}),we.jsx("span",{className:"fw-semibold "+(w?"text-success":"text-primary"),children:w?"Face Recognized Successfully!":y||!N?"Demo Face Recognition Active":"Face Recognition Active"})]}),we.jsx("p",{className:"small text-muted mb-2",children:w?"Unlocking folder...":y||!N?"Simulating face recognition for demo purposes...":"Please position your face in the center and look directly at the camera"}),we.jsx("div",{className:"progress face-scan-progress",children:we.jsx("div",{className:`progress-bar ${w?"bg-success":"bg-primary"} ${w?"":"progress-bar-animated progress-bar-striped"}`,style:{width:w?"100%":`${b}%`,transition:w?"all 0.5s ease":"width 0.3s ease",animationDuration:"1.5s"}})}),we.jsx("div",{className:"mt-2",children:we.jsxs("small",{className:w?"text-success fw-bold":"text-muted",children:[Math.round(b),"%"]})})]})]})}),we.jsxs("div",{className:"mb-3",children:[we.jsx("label",{className:"form-label",children:"PIN"}),we.jsx(ie,{type:"password",value:o,onChange:e=>r(e.target.value),onKeyDown:e=>"Enter"===e.key&&z(),maxLength:4,placeholder:""}),d&&we.jsx(H,{color:"danger",className:"mt-2 py-2 text-center",children:d})]}),we.jsxs("div",{className:"d-grid gap-2",children:[we.jsx(J,{color:"primary",onClick:z,children:" Unlock with PIN"}),we.jsx(J,{color:w?"success":"warning",variant:w?"":"outline",disabled:u,onClick:()=>S(!1),className:`face-unlock-btn ${u?"scanning":""} ${w?"success":""}`,children:w?we.jsxs(we.Fragment,{children:[we.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",className:"me-1",children:we.jsx("path",{d:"M8 12l3 3 5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Unlocked Successfully!"]}):u?we.jsxs(we.Fragment,{children:[we.jsx("div",{className:"scanning-icon me-1",children:we.jsx(x,{size:14})}),"Demo Scanning..."]}):we.jsx(we.Fragment,{children:" Demo Face Unlock (No Camera)"})}),we.jsxs("details",{className:"mt-2",children:[we.jsx("summary",{className:"btn btn-link btn-sm text-decoration-none text-muted cursor-pointer",children:" Advanced Options"}),we.jsx("div",{className:"mt-2 p-3 border rounded bg-light",children:we.jsxs("div",{className:"d-grid gap-2",children:[we.jsx(J,{color:"info",variant:"outline",size:"sm",onClick:()=>{j(!1),k(!0),S(!0)},disabled:u,children:" Try Camera Face Unlock (Advanced)"}),we.jsx("div",{className:"small text-warning text-center",children:" Camera mode may request permission and access your device camera"})]})})]}),we.jsx("div",{className:"small text-info text-center px-2 mt-2",children:" Default: Demo mode simulates face unlock without camera access"}),p&&we.jsx(H,{color:"danger",className:"mt-2 py-2 text-center",children:p})]})]}),we.jsx(q,{children:we.jsx(J,{color:"secondary",variant:"outline",onClick:s,children:"Cancel"})})]})},An=({file:e,onClose:t})=>{const a=e.type?.startsWith("image/"),n="application/pdf"===e.type,i=e.type?.startsWith("video/"),o=e.type?.startsWith("audio/"),l=e.type?.startsWith("text/")||["application/json","application/xml","application/xhtml+xml"].includes(e.type||""),c=e.url?.startsWith("http")?e.url:e.url||"",[d,m]=s.useState(null),[u,h]=s.useState(null);s.useEffect(()=>{let e=!1;return(async()=>{if(l)try{const t=await fetch(c);if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.text();if(!e){const e=204800;m(s.length>e?s.slice(0,e)+"\n\n(truncated)":s)}}catch(t){e||h(t.message)}})(),()=>{e=!0}},[c,l]);return we.jsxs(M,{visible:!0,onClose:t,size:"lg",fullscreen:"sm",children:[we.jsx(R,{children:we.jsx(U,{children:e.name})}),we.jsxs(W,{style:{maxHeight:"80vh",overflow:"auto"},children:[we.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-3",children:[we.jsx(J,{color:"secondary",variant:"outline",size:"sm",onClick:()=>window.open(c,"_blank"),children:"Open"}),we.jsx(J,{color:"success",variant:"outline",size:"sm",onClick:()=>{const t=document.createElement("a");t.href=c,t.download=e.name||"download",document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:"Download"}),we.jsx(J,{color:"primary",variant:"outline",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(c)}catch(e){}},children:"Copy Link"})]}),a&&we.jsx("img",{src:c,alt:e.name,className:"img-fluid rounded",style:{width:"100%",height:"auto",maxHeight:"75vh",objectFit:"contain"}}),i&&we.jsx("video",{src:c,controls:!0,className:"w-100 rounded",style:{width:"100%",height:"auto",maxHeight:"75vh"}}),o&&we.jsx("audio",{src:c,controls:!0,className:"w-100"}),n&&we.jsx("iframe",{src:c,className:"w-100",style:{height:"75vh"},title:e.name}),l&&we.jsx("div",{className:"border rounded p-3 bg-light",style:{maxHeight:"75vh",overflow:"auto"},children:u?we.jsxs("div",{className:"text-danger",children:["Failed to load text: ",u]}):we.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",margin:0},children:d??"Loading"})}),!a&&!i&&!o&&!n&&!l&&we.jsxs("div",{className:"text-center py-5 text-muted",children:[we.jsx(r,{size:64,className:"mb-3"}),we.jsx("div",{children:"Preview not available for this file type"})]})]}),we.jsx(q,{children:we.jsx(J,{color:"secondary",onClick:t,children:"Close"})})]})},Tn=({folder:t,onClose:s,onSave:a})=>{const[n,i]=e.useState(t?.name||""),[o,r]=e.useState(""),[l,c]=e.useState(!t?.locked),d=()=>{a({name:n,pin:o}),s()};return we.jsxs(M,{visible:!0,onClose:s,alignment:"center",children:[we.jsx(R,{children:we.jsx(U,{children:"Edit Folder"})}),we.jsxs(W,{children:[we.jsxs("div",{className:"mb-3",children:[we.jsx("label",{className:"form-label",children:"Folder Name"}),we.jsx(ie,{type:"text",value:n,onChange:e=>i(e.target.value),onKeyDown:e=>"Enter"===e.key&&d(),autoFocus:!0})]}),we.jsxs("div",{className:"mb-2 form-check",children:[we.jsx("input",{id:"removePinChk",className:"form-check-input",type:"checkbox",checked:l,onChange:e=>c(e.target.checked)}),we.jsx("label",{className:"form-check-label",htmlFor:"removePinChk",children:"No PIN (unlocked)"})]}),!l&&we.jsxs("div",{children:[we.jsx("label",{className:"form-label",children:"New PIN (4 digits)"}),we.jsx(ie,{type:"password",value:o,onChange:e=>r(e.target.value),onKeyDown:e=>"Enter"===e.key&&d(),placeholder:"",maxLength:4})]})]}),we.jsxs(q,{children:[we.jsx(J,{color:"secondary",variant:"outline",onClick:s,children:"Cancel"}),we.jsx(J,{color:"primary",onClick:d,children:"Save"})]})]})},Fn=({onClose:t,onCreate:s})=>{const[a,n]=e.useState(""),[i,o]=e.useState(""),r=()=>{a.trim()&&(s(a,i),t())};return we.jsxs(M,{visible:!0,onClose:t,alignment:"center",children:[we.jsx(R,{children:we.jsx(U,{children:"New Folder"})}),we.jsxs(W,{children:[we.jsxs("div",{className:"mb-3",children:[we.jsx("label",{className:"form-label",children:"Folder Name"}),we.jsx(ie,{type:"text",value:a,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&r(),placeholder:"My Folder",autoFocus:!0})]}),we.jsxs("div",{children:[we.jsx("label",{className:"form-label",children:"PIN (optional - 4 digits)"}),we.jsx(ie,{type:"password",value:i,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&r(),placeholder:"",maxLength:4}),we.jsx("div",{className:"form-text",children:"Leave empty for unlocked folder"})]})]}),we.jsxs(q,{children:[we.jsx(J,{color:"secondary",variant:"outline",onClick:t,children:"Cancel"}),we.jsx(J,{color:"primary",onClick:r,children:"Create"})]})]})};function _n({show:e,title:t,message:s,onCancel:a,onConfirm:n}){return we.jsxs(M,{visible:e,onClose:a,alignment:"center",children:[we.jsx(R,{children:we.jsx(U,{children:t||"Confirm"})}),we.jsx(W,{children:we.jsxs("div",{className:"d-flex align-items-start gap-2",children:[we.jsx(L,{className:"text-danger flex-shrink-0"}),we.jsx("div",{children:s||"Are you sure?"})]})}),we.jsxs(q,{children:[we.jsx(J,{color:"secondary",variant:"outline",onClick:a,children:"Cancel"}),we.jsx(J,{color:"danger",onClick:n,children:"Delete"})]})]})}function In({show:e,folder:t,contentsAnalysis:s,onCancel:a,onConfirm:n}){const i=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB";if(!e||!t||!s)return null;const{fileCount:o,subfolderCount:l,totalSize:c,fileTypes:d,isEmpty:m}=s;return we.jsxs(M,{visible:e,onClose:a,alignment:"center",size:"lg",children:[we.jsx(R,{children:we.jsxs(U,{className:"text-danger",children:[we.jsx(L,{size:20,className:"me-2"}),'Delete Folder "',t.name,'"']})}),we.jsx(W,{children:m?we.jsxs("div",{className:"text-center py-3",children:[we.jsx(C,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h5",{className:"fw-bold mb-2",children:"Delete Empty Folder?"}),we.jsx("p",{className:"text-muted mb-0",children:"This folder is empty and can be safely deleted."})]}):we.jsxs("div",{children:[we.jsxs("div",{className:"d-flex align-items-center gap-3 mb-4 p-3 bg-danger-subtle border border-danger-subtle rounded",children:[we.jsx(L,{size:32,className:"text-danger flex-shrink-0"}),we.jsxs("div",{children:[we.jsx("h5",{className:"fw-bold mb-1 text-danger",children:" Warning: This folder contains data!"}),we.jsxs("p",{className:"mb-0 text-danger-emphasis",children:["Deleting this folder will ",we.jsx("strong",{children:"permanently remove all its contents"}),". This action cannot be undone."]})]})]}),we.jsxs("div",{className:"mb-4",children:[we.jsx("h6",{className:"fw-bold mb-3",children:" Folder Contents Summary:"}),we.jsxs("div",{className:"row g-3 mb-3",children:[o>0&&we.jsx("div",{className:"col-md-6",children:we.jsxs("div",{className:"d-flex align-items-center gap-2 p-2 bg-light rounded",children:[we.jsx(r,{size:20,className:"text-primary"}),we.jsxs("div",{children:[we.jsxs("div",{className:"fw-semibold",children:[o," File",1!==o?"s":""]}),we.jsx("small",{className:"text-muted",children:i(c)})]})]})}),l>0&&we.jsx("div",{className:"col-md-6",children:we.jsxs("div",{className:"d-flex align-items-center gap-2 p-2 bg-light rounded",children:[we.jsx(C,{size:20,className:"text-warning"}),we.jsxs("div",{children:[we.jsxs("div",{className:"fw-semibold",children:[l," Subfolder",1!==l?"s":""]}),we.jsx("small",{className:"text-muted",children:"May contain additional files"})]})]})})]}),o>0&&we.jsxs("div",{className:"mb-3",children:[we.jsx("h6",{className:"small fw-semibold mb-2",children:" File Types:"}),we.jsx("div",{className:"p-2 bg-light rounded",children:we.jsx("small",{className:"text-muted",children:(e=>{const t=[];return e.images>0&&t.push(`${e.images} image${e.images>1?"s":""}`),e.documents>0&&t.push(`${e.documents} document${e.documents>1?"s":""}`),e.videos>0&&t.push(`${e.videos} video${e.videos>1?"s":""}`),e.audio>0&&t.push(`${e.audio} audio file${e.audio>1?"s":""}`),e.other>0&&t.push(`${e.other} other file${e.other>1?"s":""}`),t.join(", ")})(d)})})]})]}),we.jsx(H,{color:"danger",className:"mb-0",children:we.jsxs("div",{className:"d-flex align-items-start gap-2",children:[we.jsx(L,{size:16,className:"flex-shrink-0 mt-1"}),we.jsxs("div",{children:[we.jsx("strong",{children:"Are you absolutely sure?"}),we.jsxs("div",{className:"mt-1",children:["This will delete:",we.jsxs("ul",{className:"mb-1 mt-1",children:[o>0&&we.jsxs("li",{children:[o," file",1!==o?"s":""," (",i(c),")"]}),l>0&&we.jsxs("li",{children:[l," subfolder",1!==l?"s":""," and all their contents"]})]}),we.jsx("strong",{children:"This action cannot be undone!"})]})]})]})})]})}),we.jsxs(q,{children:[we.jsx(J,{color:"secondary",variant:"outline",onClick:a,children:"Cancel"}),we.jsx(J,{color:"danger",onClick:n,children:m?"Delete Empty Folder":"Delete Folder & All Contents"})]})]})}function Ln(){const{user:t,token:a,loading:o,signIn:w,signUp:f,updateUserProfile:b}=(()=>{const[t,s]=e.useState(null),[a,n]=e.useState(null),[i,o]=e.useState(!0);e.useEffect(()=>{const e=sessionStorage.getItem("sfm_user"),t=sessionStorage.getItem("sfm_token");if(e&&t){const a=JSON.parse(e),i=`profilePhoto_${a?.email||a?.id||"default"}`,o=localStorage.getItem(i);o&&!a.profilePhoto&&(a.profilePhoto=o),s(a),n(t)}o(!1)},[]);const r="/api/auth";return e.useEffect(()=>{let e=!1;return t&&a&&(async()=>{try{const s=await fetch("/api/face-profiles/combined",{headers:a?{Authorization:`Bearer ${a}`}:{}});if(s.ok){const a=await s.json().catch(()=>({}));if(!e&&a&&Array.isArray(a.descriptors)&&a.descriptors.length){const e=`sfm_face_descriptors_${t?.id||t?.email||"anon"}`;localStorage.setItem(e,JSON.stringify(a.descriptors));const s=`sfm_face_descriptor_${t?.id||t?.email||"anon"}`;return void localStorage.setItem(s,JSON.stringify(a.descriptors[0]))}}const n=await fetch("/api/auth/face",{headers:a?{Authorization:`Bearer ${a}`}:{}});if(n.ok){const s=await n.json().catch(()=>({}));if(!e&&s&&Array.isArray(s.descriptor)&&s.descriptor.length){const e=`sfm_face_descriptor_${t?.id||t?.email||"anon"}`;localStorage.setItem(e,JSON.stringify(s.descriptor))}}}catch(s){}})(),()=>{e=!0}},[t,a]),{user:t,token:a,loading:i,signIn:async(e,t)=>{const a=await fetch(`${r}/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok){const e=await a.json().catch(()=>({}));throw new Error(e.error||"Sign in failed")}const i=await a.json();return sessionStorage.setItem("sfm_user",JSON.stringify(i.user)),sessionStorage.setItem("sfm_token",i.token),s(i.user),n(i.token),i.user},signUp:async(e,t)=>{const a=await fetch(`${r}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok){const e=await a.json().catch(()=>({}));throw new Error(e.error||"Sign up failed")}const i=await a.json();return sessionStorage.setItem("sfm_user",JSON.stringify(i.user)),sessionStorage.setItem("sfm_token",i.token),s(i.user),n(i.token),i.user},signOut:()=>{s(null),n(null),sessionStorage.removeItem("sfm_user"),sessionStorage.removeItem("sfm_token")},updateUserProfile:e=>{const a={...t,...e};if(s(a),sessionStorage.setItem("sfm_user",JSON.stringify(a)),void 0!==e.profilePhoto){const t=`profilePhoto_${a?.email||a?.id||"default"}`;e.profilePhoto?localStorage.setItem(t,e.profilePhoto):localStorage.removeItem(t)}}}})(),[v,y]=e.useState([]),[I,L]=e.useState([]),[M,R]=e.useState([]),[U,W]=e.useState(null),[H,q]=e.useState(new Set),[J,Q]=e.useState(null),[ee,te]=e.useState(null),[se,ae]=e.useState(!1),[ne,ie]=e.useState(null),[oe,re]=e.useState(!1),[le,ce]=e.useState(!1),[de,me]=e.useState(""),[ue,he]=e.useState("grid"),pe=(()=>{const t=e.useContext(xn);if(!t)throw new Error("useToast must be used within ToastProvider");return t.showToast})(),[ge,fe]=e.useState(!1),xe=e.useRef(null),[be,ve]=e.useState({show:!1,title:"",message:"",onConfirm:null}),[ye,je]=e.useState(!1),[Ne,ke]=e.useState(0),[Ce,Se]=e.useState(!1),[ze,Ee]=e.useState(!1),[Pe,$e]=e.useState(!1),[Ae,Te]=e.useState({show:!1,folder:null,contentsAnalysis:null}),[Fe,_e]=e.useState(!1),[Ie,Le]=e.useState([]),[De,Be]=e.useState("dashboard"),Oe="/api",Me=e.useCallback(()=>{if(t)try{const e=`sfm_favorites_${t?.id||t?.email||"anon"}`,s=localStorage.getItem(e);s&&Le(JSON.parse(s))}catch(e){Le([])}},[t]),Re=e.useCallback(e=>{if(t)try{const s=`sfm_favorites_${t?.id||t?.email||"anon"}`;localStorage.setItem(s,JSON.stringify(e)),Le(e)}catch(s){}},[t]),Ue=e.useCallback(e=>{const t=e._id||e.id,s=Ie.some(e=>(e._id||e.id)===t);let a;s?(a=Ie.filter(e=>(e._id||e.id)!==t),pe(`Removed "${e.name}" from favorites`,{type:"info"})):(a=[...Ie,{...e,favoritedAt:(new Date).toISOString()}],pe(`Added "${e.name}" to favorites`,{type:"success"})),Re(a),Ge(s?"FILE_UNFAVORITE":"FILE_FAVORITE",{fileName:e.name,fileId:t,fileType:e.type||"unknown"})},[Ie,Re,pe]),We=e.useCallback(e=>{const t=e._id||e.id;return Ie.some(e=>(e._id||e.id)===t)},[Ie]),He=e.useCallback(e=>{if(!e||!M||!v)return 0;try{let t=M.filter(t=>t&&String(t.folderId)===String(e)).reduce((e,t)=>e+(t.size||0),0);const s=v.filter(t=>t&&String(t.parentId)===String(e)),a=10;return s.length>0&&a>0&&s.forEach(s=>{s&&(s._id||s.id)!==e&&(t+=He(s._id||s.id))}),t}catch(t){return 0}},[M,v]),{getRootProps:Ve,getInputProps:qe,isDragActive:Je}=N({onDrop:e=>{(async e=>{if(!e||0===e.length)return;je(!0),fe(!0),ke(0);const t=e.length,s=Array.from(e).map(e=>e.name).join(", ");try{pe(`Processing and uploading ${t} file${t>1?"s":""} using multicore processing...`,{type:"info"}),await zn.initialize();const n=[],i=[];let o=0;const l=()=>{o++;const e=Math.floor(o/t*50);ke(e)};for(const t of e){const e=(async()=>{try{const s=await zn.processFile("analyze",t,{timeout:15e3});let a=t;if(t.type.startsWith("image/")&&t.size>1048576)try{const e=await zn.processFile("compress",t,{quality:.8,format:"webp",timeout:3e4});a=new r([e],t.name.replace(/\.[^/.]+$/,".webp"),{type:"image/webp"})}catch(e){}return l(),{original:t,processed:a,analysis:s}}catch(s){return l(),{original:t,processed:t,analysis:null}}})();i.push(e)}const c=await Promise.all(i);n.push(...c),ke(50);const d=new FormData;for(const e of n)d.append("files",e.processed),e.analysis&&d.append(`analysis_${e.processed.name}`,JSON.stringify(e.analysis));d.append("folderId",U||"");const m=setInterval(()=>{ke(e=>{const t=e+2;return t>=95?95:t})},200),u=await fetch(`${Oe}/files/upload`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:d});if(clearInterval(m),ke(100),!u.ok){const e=await u.text();throw new Error(e||`Upload failed (${u.status})`)}const h=await u.json();R(e=>[...e,...h]);const p=Array.from(e).reduce((e,t)=>e+t.size,0),g=n.reduce((e,t)=>e+t.processed.size,0),w=p-g;await Ge("FILE_UPLOAD",{fileCount:t,fileNames:s,folderId:U||"root",folderName:et?.name||"Root",originalSize:p,processedSize:g,compressionSavings:w,multicore:!0}),await Ze();const f=w>0?` (saved ${Math.round(w/1024)}KB through optimization)`:"";pe(`Successfully uploaded: ${s}${f}`,{type:"success"})}catch(n){pe(`Upload failed: ${n.message}`,{type:"error"})}finally{je(!1),fe(!1),ke(0)}})(e)},noClick:!0,noKeyboard:!0,multiple:!0}),Ye=async(e,t={})=>{const s=t.headers||{};a&&(s.Authorization=`Bearer ${a}`),!t.body||t.body instanceof FormData||(s["Content-Type"]="application/json");const n=await fetch(`${Oe}${e}`,{...t,headers:s});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.error||`Request failed: ${n.status}`)}return n.json().catch(()=>({}))},Ke=(e,t="file")=>{const s=JSON.parse(localStorage.getItem("sfm_trash_items")||"[]"),a=new Date(Date.now()-6048e5);return s.some(s=>{const n=s._id||s.id,i=new Date(s.deletedAt)>a,o=s.type===t;return String(n)===String(e)&&o&&i})},Ge=async(e,s={})=>{if(t&&a)try{const n={userId:t.id||t._id,userEmail:t.email,userName:t.name||t.username,action:e,details:s,timestamp:(new Date).toISOString(),sessionId:sessionStorage.getItem("sfm_session_id")||"unknown",userAgent:navigator.userAgent,ipAddress:"client-side"};await fetch(`${Oe}/activity-logs`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(n)}).catch(e=>{const t=JSON.parse(localStorage.getItem("sfm_activity_logs_backup")||"[]");t.push(n),t.length>100&&t.shift(),localStorage.setItem("sfm_activity_logs_backup",JSON.stringify(t))})}catch(n){}},Ze=e.useCallback(async(e=!1)=>{if(t&&a){Ee(!0);try{e&&pe("Refreshing data...",{type:"info"});const t=U?`?parentId=${U}`:"",s=await Ye(`/folders${t}`);y(s||[]);const a=U?`/files?folderId=${U}`:"/files",n=await Ye(a);if(R(n||[]),!U){const e=await Ye("/folders");L(e||[])}e&&pe("Data refreshed successfully",{type:"success"})}catch(s){e&&pe("Failed to refresh data",{type:"error"})}finally{Ee(!1)}}},[t,a,U,pe]);e.useEffect(()=>{if(!t||!a)return;const e=setInterval(()=>{Ze()},3e4);return()=>clearInterval(e)},[Ze,t,a]),e.useEffect(()=>{if(!t)return $e(!1),void Le([]);const e=`sfm_face_descriptor_${t?.id||t?.email||"anon"}`,s=`sfm_face_descriptors_${t?.id||t?.email||"anon"}`,a=!!localStorage.getItem(e),n=!!localStorage.getItem(s);$e(a||n),Me()},[t,Me]),e.useEffect(()=>{t&&a&&(Ge("USER_LOGIN",{loginTime:(new Date).toISOString(),userAgent:navigator.userAgent}),(async()=>{try{const e=await Ye("/folders");L(e||[])}catch(e){}})())},[t,a]),e.useEffect(()=>{if(!t||!a)return;if(Fe)return;(async()=>{try{Ee(!0);const e=U?`?parentId=${U}`:"",t=await Ye(`/folders${e}`);Array.isArray(t),y(t||[]);const s=U?`/files?folderId=${U}`:"/files",a=await Ye(s);Array.isArray(a),R(a||[])}catch(e){pe(`Failed to load folder contents: ${e.message}`,{type:"error"}),y([]),R([])}finally{Ee(!1)}})()},[t,a,U,Fe]);const Xe=e.useMemo(()=>{const e=M.length,t=v.filter(e=>!e.parentId).length,s=M.reduce((e,t)=>e+(t.size||0),0),a=new Date(Date.now()-864e5),n=M.filter(e=>new Date(e.uploadDate||e.createdAt||e.dateModified)>a).length,i={images:M.filter(e=>e.type?.startsWith("image/")).length,documents:M.filter(e=>e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")).length,videos:M.filter(e=>e.type?.startsWith("video/")).length,audio:M.filter(e=>e.type?.startsWith("audio/")).length,other:M.filter(e=>!(e.type&&(e.type.startsWith("image/")||e.type.startsWith("video/")||e.type.startsWith("audio/")||e.type.includes("pdf")||e.type.includes("doc")||e.type.includes("text")))).length},o=s/21474836480*100;return{totalFiles:e,totalFolders:t,totalSize:s,recentFiles:n,fileTypes:i,storageUsed:Math.min(o,100),storageUsedGB:(s/1073741824).toFixed(2),storageLimitGB:20,lastUpdated:(new Date).toLocaleTimeString()}},[M,v]);if(o)return we.jsxs("div",{className:"d-flex align-items-center justify-content-center vh-100",children:[we.jsx(V,{color:"primary",style:{width:"3rem",height:"3rem"}}),we.jsx("span",{className:"ms-3 fw-semibold text-primary",children:"Loading..."})]});if(!t)return we.jsx(Pn,{onSignIn:w,onSignUp:f});const Qe=e=>e?._id||e?.id||null,et=v.find(e=>Qe(e)===U),tt=[];let st=et;for(;st;){tt.unshift(st);const e=st.parentId||null;st=v.find(t=>String(Qe(t))===String(e))}const at=M.filter(e=>U?String(e.folderId)===String(U):!e.folderId).filter(e=>!Ke(e._id||e.id,"file")),nt=v.filter(e=>U?String(e.parentId)===String(U):!e.parentId).filter(e=>!Ke(e._id||e.id,"folder")),it=at.filter(e=>e.name.toLowerCase().includes(de.toLowerCase())),ot=nt.filter(e=>e.name.toLowerCase().includes(de.toLowerCase()));tt.map(e=>e.name);const rt=async e=>{try{const t=await fetch(`${Oe}/files/${e._id||e.id}/download`,{headers:a?{Authorization:`Bearer ${a}`}:{}});if(!t.ok){if(404===t.status&&e.url){const t=(e.url.startsWith("http"),e.url);return void window.open(t,"_blank")}const s=await t.text();throw new Error(s||`HTTP ${t.status}`)}const s=await t.blob(),n=window.URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download=e.name||"download",document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(n),await Ge("FILE_DOWNLOAD",{fileName:e.name||"download",fileId:e._id||e.id,fileSize:e.size||0,fileType:e.type||"unknown"})}catch(t){pe(`Download failed: ${t.message}`,{type:"error"})}},lt=e=>{try{if(!e)return void pe("Invalid folder selected",{type:"error"});const s=e._id||e.id;if(!s)return void pe("Folder ID is missing",{type:"error"});if(e.locked&&!H.has(s)){const s=`sfm_face_descriptor_${t?.id||t?.email||"anon"}`,a=`sfm_face_descriptors_${t?.id||t?.email||"anon"}`;localStorage.getItem(s),localStorage.getItem(a);Q(e)}else _e(!0),Be("folder"),W(s),pe(`Opening folder "${e.name}"...`,{type:"info"})}catch(s){pe(`Failed to open folder: ${s.message}`,{type:"error"})}},ct=e=>{let t;if(t="object"==typeof e&&null!==e?e._id||e.id:e,t=String(t),!/^[0-9a-fA-F]{24}$/.test(t))return void pe("Invalid file ID format",{type:"error"});const s=M.find(e=>String(e._id||e.id)===t),a=s?.name||"this file";ve({show:!0,title:"Move to trash",message:`Are you sure you want to move "${a}" to trash? You can restore it within 7 days.`,onConfirm:async()=>{try{fe(!0),pe("Moving to trash...",{type:"info"});const n=JSON.parse(localStorage.getItem("sfm_trash_items")||"[]"),i={...s,_id:t,id:t,deletedAt:(new Date).toISOString(),type:"file",originalLocation:U?`folder-${U}`:"root"};n.push(i),localStorage.setItem("sfm_trash_items",JSON.stringify(n)),await Ye(`/files/${e}`,{method:"DELETE"}),R(t=>t.filter(t=>(t._id||t.id)!==e)),await Ge("FILE_DELETE",{fileName:a,fileId:t,fileSize:s.size||0,fileType:s.type||"unknown",folderId:U||"root",folderName:et?.name||"Root",movedToTrash:!0}),await Ye(`/files/${t}`,{method:"DELETE"}),R(e=>e.filter(e=>(e._id||e.id)!==t)),pe(`Failed to move file to trash: ${err.message}`,{type:"error"})}finally{fe(!1),ve({show:!1,title:"",message:"",onConfirm:null})}}})},dt=e=>{let t;if(t="object"==typeof e&&null!==e?e._id||e.id:e,t=String(t),!/^[0-9a-fA-F]{24}$/.test(t))return void pe("Invalid folder ID format",{type:"error"});const s=[...v,...I].find(e=>String(e._id||e.id)===t);if(!s)return void pe("Folder not found",{type:"error"});const a=gt(t);Te({show:!0,folder:s,contentsAnalysis:a})},mt=e=>e&&0!==e?e<1024?Math.round(e)+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB":"0 B",ut=e=>{if(!e||!M)return 0;try{return M.filter(t=>t&&String(t.folderId)===String(e)).length}catch(t){return 0}},ht=e=>{if(!e||!M||!v)return 0;try{const t=M.filter(t=>t&&String(t.folderId)===String(e)).length;return t+v.filter(t=>t&&String(t.parentId)===String(e)).length}catch(t){return 0}},pt=e=>{if(!e||!v)return 0;try{return v.filter(t=>t&&String(t.parentId)===String(e)).length}catch(t){return 0}},gt=e=>{const t=M.filter(t=>String(t.folderId)===String(e)),s=v.filter(t=>String(t.parentId)===String(e)),a=t.reduce((e,t)=>e+(t.size||0),0),n={images:t.filter(e=>e.type?.startsWith("image/")).length,documents:t.filter(e=>e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")).length,videos:t.filter(e=>e.type?.startsWith("video/")).length,audio:t.filter(e=>e.type?.startsWith("audio/")).length,other:t.filter(e=>!(e.type&&(e.type.startsWith("image/")||e.type.startsWith("video/")||e.type.startsWith("audio/")||e.type.includes("pdf")||e.type.includes("doc")||e.type.includes("text")))).length};return{fileCount:t.length,subfolderCount:s.length,totalSize:a,fileTypes:n,isEmpty:0===t.length&&0===s.length}};return we.jsx(Sn,{children:we.jsxs("div",{className:"filearlo-container d-flex",children:[we.jsxs("div",{className:"filearlo-sidebar d-flex flex-column",style:{width:"380px",minWidth:"380px"},children:[we.jsxs("div",{className:"p-4",children:[we.jsx("div",{className:"d-flex align-items-center gap-3 mb-5",children:we.jsx("div",{className:"fw-bold h3 mb-0",style:{color:"var(--color-text-primary)"},children:"FileArlo"})}),we.jsxs("div",{className:"position-relative mb-0",children:[we.jsx(i,{size:16,className:"position-absolute",style:{left:"12px",top:"12px",color:"var(--color-text-muted)"}}),we.jsx("input",{type:"text",className:"search-input-enhanced w-100",placeholder:"Search anything..",value:de,onChange:e=>me(e.target.value)})]})]}),we.jsxs("div",{className:"flex-grow-1 overflow-auto px-4 py-3",children:[we.jsx("div",{className:"mb-4",children:we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("dashboard"===De?"active":""),onClick:()=>{Ge("VIEW_CHANGE",{from:De,to:"dashboard"}),Be("dashboard"),W(null)},children:[we.jsx(k,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Dashboard"})]})}),we.jsxs("div",{className:"mb-4",children:[we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("storage"===De?"active":""),onClick:()=>{Ge("VIEW_CHANGE",{from:De,to:"storage"}),Be("storage"),W(null)},children:[we.jsx(C,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"My Storage"}),we.jsx(O,{color:"info",className:"ms-auto",children:(()=>{const e=[...I||[],...v||[]].filter((e,t,s)=>{const a=s.findIndex(t=>Qe(t)===Qe(e))===t,n=!Ke(Qe(e),"folder");return a&&n});return e.length})()})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("photos"===De?"active":""),onClick:()=>{Be("photos"),W(null)},children:[we.jsx(p,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Photos"}),we.jsx(O,{color:"danger",className:"ms-auto",children:M.filter(e=>e.type?.startsWith("image/")&&!Ke(e._id||e.id,"file")).length})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("audio"===De?"active":""),onClick:()=>{Be("audio"),W(null)},children:[we.jsx(h,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Audio"}),we.jsx(O,{color:"info",className:"ms-auto",children:M.filter(e=>e.type?.startsWith("audio/")&&!Ke(e._id||e.id,"file")).length})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("documents"===De?"active":""),onClick:()=>{Be("documents"),W(null)},children:[we.jsx(g,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Documents"}),we.jsx(O,{color:"primary",className:"ms-auto",children:M.filter(e=>(e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")||e.type?.includes("sheet")||e.type?.includes("presentation"))&&!Ke(e._id||e.id,"file")).length})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("videos"===De?"active":""),onClick:()=>{Be("videos"),W(null)},children:[we.jsx(u,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Videos"}),we.jsx(O,{color:"warning",className:"ms-auto",children:M.filter(e=>e.type?.startsWith("video/")&&!Ke(e._id||e.id,"file")).length})]})]}),we.jsxs("div",{className:"mb-4",children:[we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3",children:[we.jsx(S,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Recent"})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3",children:[we.jsx(z,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Shared Link"})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("favorites"===De?"active":""),onClick:()=>{Be("favorites"),W(null)},children:[we.jsx(d,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Favorites"}),we.jsx(O,{color:"primary",className:"ms-auto",children:Ie.length})]}),we.jsxs("button",{className:"sidebar-nav-item btn w-100 text-start d-flex align-items-center gap-4 px-4 py-3 "+("trash"===De?"active":""),onClick:()=>{Be("trash"),W(null)},children:[we.jsx(m,{size:20}),we.jsx("span",{className:"fw-semibold",style:{fontSize:"1rem"},children:"Trash"}),we.jsx(O,{color:"danger",className:"ms-auto",children:(()=>{const e=JSON.parse(localStorage.getItem("sfm_trash_items")||"[]"),t=new Date(Date.now()-6048e5);return e.filter(e=>new Date(e.deletedAt)>t).length})()})]})]})]}),we.jsxs("div",{className:"p-4 border-top",children:[we.jsxs("div",{className:"mb-4",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[we.jsx("span",{className:"fw-semibold",children:"Storage"}),we.jsxs("span",{className:"small text-muted",children:[Math.round(Xe.storageUsed),"%"]})]}),we.jsxs("div",{className:"text-muted small mb-2",children:[Xe.storageUsedGB," GB out of ",Xe.storageLimitGB," GB used"]}),we.jsx("div",{className:"storage-progress",children:we.jsx("div",{className:"storage-progress-bar",style:{width:`${Xe.storageUsed}%`,background:Xe.storageUsed>80?"linear-gradient(90deg, #ef4444, #dc2626)":Xe.storageUsed>60?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, var(--color-primary), var(--color-primary-light))",transition:"all 0.3s ease"}})}),we.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[we.jsxs("small",{className:"text-muted",children:[Xe.totalFiles," files"]}),we.jsxs("small",{className:"text-muted",children:[Xe.totalFolders," folders"]})]})]}),we.jsx("button",{className:"btn btn-primary w-100 fw-semibold py-2",children:"Upgrade Now"})]})]}),we.jsxs("div",{className:"flex-grow-1 d-flex flex-column",children:[we.jsxs("div",{className:"filearlo-header d-flex align-items-center justify-content-between",style:{padding:"1.5rem 2.5rem"},children:[we.jsxs("div",{className:"d-flex align-items-center gap-4",children:[we.jsx("h1",{className:"filearlo-title mb-0",children:"favorites"===De?"My Favorites":"dashboard"===De?"My Storage":"storage"===De?"All Folders":"photos"===De?"Photos":"audio"===De?"Audio Files":"documents"===De?"Documents":"videos"===De?"Videos":"trash"===De?"Trash":et?.name||"Folder"}),ze&&we.jsxs("div",{className:"d-flex align-items-center gap-2 text-primary",children:[we.jsx(V,{size:"sm"}),we.jsx("small",{className:"fw-medium",children:"Refreshing..."})]})]}),we.jsxs("div",{className:"d-flex align-items-center gap-3",children:[we.jsxs("button",{className:"btn btn-link p-2",onClick:()=>re(!0),title:Pe?"Manage Face Recognition":"Set up Face Unlock (One-time setup)",children:[we.jsx(E,{size:20,style:{color:"var(--color-text-secondary)"}}),!Pe&&we.jsx("div",{className:"position-absolute top-0 end-0",children:we.jsx("span",{className:"badge bg-primary",style:{fontSize:"8px",padding:"2px 4px"},children:"NEW"})})]}),ye&&we.jsxs("div",{className:"d-flex align-items-center gap-3 me-3",children:[we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsx(V,{size:"sm",color:"primary"}),we.jsx("span",{className:"small text-primary",children:"Uploading..."})]}),we.jsx("div",{className:"progress",style:{width:"120px",height:"6px"},children:we.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${Ne}%`,transition:"width 0.3s ease"},"aria-valuenow":Ne,"aria-valuemin":"0","aria-valuemax":"100"})})]}),we.jsx("div",{className:"position-relative",children:we.jsxs("button",{className:"btn btn-link p-2",children:[we.jsx(P,{size:20,style:{color:"var(--color-text-secondary)"}}),we.jsx("div",{className:"notification-badge",children:Xe.recentFiles})]})}),we.jsxs("div",{className:"d-flex align-items-center gap-3",children:[we.jsxs("div",{className:"text-end",children:[we.jsx("div",{className:"fw-medium",style:{fontSize:"0.875rem",color:"var(--color-text-primary)"},children:t?.email}),we.jsx("small",{className:"text-muted",children:"Free Account"})]}),we.jsx("div",{className:"position-relative",children:t?.profilePhoto?we.jsx("img",{src:t.profilePhoto,alt:"Profile",className:"rounded-circle",role:"button",onClick:()=>ce(!0),style:{width:"48px",height:"48px",objectFit:"cover",border:"2px solid var(--color-border-glass)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 15px rgba(16, 185, 129, 0.3)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}}):we.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",role:"button",onClick:()=>ce(!0),style:{width:"48px",height:"48px",backgroundColor:"var(--color-primary)",color:"white",border:"2px solid var(--color-border-glass)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)",e.target.style.boxShadow="0 0 15px rgba(16, 185, 129, 0.3)"},onMouseLeave:e=>{e.target.style.transform="scale(1)",e.target.style.boxShadow="none"},children:we.jsx(x,{size:20})})})]})]})]}),we.jsxs("main",{className:"flex-grow-1",...Ve(),style:{backgroundColor:"var(--color-bg-primary)",padding:"2.5rem"},children:[we.jsx("input",{...qe()}),we.jsx("input",{type:"file",multiple:!0,accept:"*/*",ref:xe,style:{display:"none"},onChange:e=>{const t=e.target.files?Array.from(e.target.files):[];if(!t.length)return;const s=new FormData;for(const a of t)s.append("files",a);s.append("folderId",U||""),fe(!0),fetch(`${Oe}/files/upload`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:s}).then(async e=>{if(!e.ok){const t=await e.text();throw new Error(t||`Upload failed (${e.status})`)}return e.json()}).then(e=>{R(t=>[...t,...e]),pe("Upload successful",{type:"success"})}).catch(e=>{pe(`Upload failed: ${e.message}`,{type:"error"})}).finally(()=>{fe(!1),e&&e.target&&(e.target.value=null)})}}),Je&&we.jsxs("div",{className:"border border-primary border-2 rounded-3 p-4 text-primary text-center mb-4",style:{backgroundColor:"rgba(79, 70, 229, 0.05)"},children:[we.jsx(n,{size:32,className:"mb-2"}),we.jsx("div",{className:"fw-semibold",children:"Drop files to upload"})]}),Fe?we.jsxs("div",{className:"d-flex align-items-center justify-content-center py-5",children:[we.jsx(V,{color:"primary",style:{width:"2rem",height:"2rem"}}),we.jsx("span",{className:"ms-3 fw-semibold text-primary",children:"Loading folder contents..."})]}):"favorites"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"My Favorites"}),we.jsxs("p",{className:"text-muted mb-0",children:[Ie.length," favorited files"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload"]})})]}),0===Ie.length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(d,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No favorites yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Star files to add them to your favorites for quick access"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>{Be("dashboard"),W(null)},children:[we.jsx(j,{size:16,className:"me-1"}),"Browse Files"]})]})})}):we.jsx("div",{className:"row g-3",children:Ie.map((e,t)=>we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>te(e),style:{animationDelay:100*t+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsx("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"120px",backgroundColor:"#f8f9fa"},children:e.type?.startsWith("image/")&&e.url?we.jsx("img",{src:e.url,alt:e.name,className:"img-fluid rounded-2",style:{maxHeight:"100%",maxWidth:"100%",objectFit:"cover"}}):we.jsxs("div",{className:"text-center",children:[we.jsx(r,{className:"text-muted",size:24}),we.jsx("div",{className:"mt-2",children:we.jsx("small",{className:"text-muted text-uppercase",children:e.name?.split(".").pop()||"FILE"})})]})}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:we.jsxs("span",{children:["Favorited on ",new Date(e.favoritedAt).toLocaleDateString()]})})]}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:[we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),te(e)},title:"Preview File",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),rt(e)},title:"Download File",children:we.jsx(c,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-warning d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),Ue(e)},title:"Remove from Favorites",children:we.jsx(d,{size:14,fill:"currentColor"})})]}),we.jsx("small",{className:"text-muted",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]})]})})},e._id||e.id||t))})]}):"storage"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"All Folders"}),we.jsx("p",{className:"text-muted mb-0",children:(()=>{const e=[...I||[],...v||[]].filter((e,t,s)=>{const a=s.findIndex(t=>Qe(t)===Qe(e))===t,n=!Ke(Qe(e),"folder");return a&&n});return`${e.length} folders  Browse all your folders in one place`})()})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsx("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>ae(!0),disabled:Ce,children:Ce?we.jsxs(we.Fragment,{children:[we.jsx(V,{size:"sm",className:"me-1"})," Creating..."]}):we.jsxs(we.Fragment,{children:[we.jsx($,{size:16,className:"me-1"})," New Folder"]})})})]}),(()=>{const e=[...I||[],...v||[]].filter((e,t,s)=>{const a=s.findIndex(t=>Qe(t)===Qe(e))===t,n=!Ke(Qe(e),"folder");return a&&n});return 0===e.length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(C,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No folders yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Create your first folder to organize your files"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>ae(!0),children:[we.jsx($,{size:16,className:"me-1"}),"Create Your First Folder"]})]})})}):we.jsx("div",{className:"row g-3",children:e.map((e,t)=>we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsxs("div",{className:"folder-card p-3 rounded-3 border hover-lift hover-glow position-relative scale-in stagger-item",style:{animationDelay:50*t+"ms"},children:[we.jsxs("div",{className:"d-flex align-items-center gap-3",role:"button",onClick:()=>lt(e),children:[we.jsx("div",{className:"rounded-2 d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:"#e0e7ff",color:"#4f46e5"},children:we.jsx(C,{size:24})}),we.jsxs("div",{className:"flex-grow-1 min-width-0",children:[we.jsxs("div",{className:"fw-semibold text-truncate mb-1",children:[e.name,(()=>{const t=ht(Qe(e));return t>0?we.jsxs("span",{className:"text-muted fw-normal ms-2",children:["(",t," item",1!==t?"s":"",")"]}):null})()]}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[we.jsxs("div",{className:"d-flex flex-column",children:[(()=>{const t=ut(Qe(e)),s=pt(Qe(e));return t>0||s>0?we.jsxs("small",{className:"text-muted",children:[t>0&&`${t} file${1!==t?"s":""}`,t>0&&s>0&&"  ",s>0&&`${s} folder${1!==s?"s":""}`]}):null})(),(()=>{const t=He(Qe(e));return t>0?we.jsxs("small",{className:"text-muted fw-semibold",style:{color:"#059669",fontSize:"0.8rem"},children:[" ",mt(t)]}):null})()]}),e.locked&&we.jsx(A,{size:12,className:"text-warning"})]})]})]}),we.jsxs("div",{className:"folder-actions mt-3 d-flex gap-2 justify-content-center opacity-0",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:t=>{t.stopPropagation(),lt(e)},title:"Open folder",children:we.jsx(l,{size:12})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:t=>{t.stopPropagation(),ie(e)},title:"Edit folder",children:we.jsx(T,{size:12})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:t=>{t.stopPropagation(),dt(Qe(e))},title:"Delete folder",children:we.jsx(m,{size:12})})]})]})},Qe(e)))})})()]}):"photos"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"Photos"}),we.jsxs("p",{className:"text-muted mb-0",children:[M.filter(e=>e.type?.startsWith("image/")&&!Ke(e._id||e.id,"file")).length," images"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload Photos"]})})]}),0===M.filter(e=>e.type?.startsWith("image/")&&!Ke(e._id||e.id,"file")).length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(p,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No photos yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Upload your first photos to see them here"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"}),"Upload Photos"]})]})})}):we.jsx("div",{className:"row g-3",children:M.filter(e=>e.type?.startsWith("image/")&&!Ke(e._id||e.id,"file")).map((e,t)=>we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>te(e),style:{animationDelay:50*t+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsx("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"180px",backgroundColor:"#f8f9fa"},children:we.jsx("img",{src:e.url,alt:e.name,className:"img-fluid rounded-2",style:{maxHeight:"100%",maxWidth:"100%",objectFit:"cover"}})}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]}),we.jsx("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),te(e)},title:"Preview",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),rt(e)},title:"Download",children:we.jsx(c,{size:14})}),we.jsx("button",{className:`btn btn-sm ${We(e)?"btn-warning":"btn-outline-warning"} d-flex align-items-center gap-1`,onClick:t=>{t.stopPropagation(),Ue(e)},title:We(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:We(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),ct(e._id||e.id)},title:"Delete",children:we.jsx(m,{size:14})})]})})]})})},e._id||e.id))})]}):"audio"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"Audio Files"}),we.jsxs("p",{className:"text-muted mb-0",children:[M.filter(e=>e.type?.startsWith("audio/")&&!Ke(e._id||e.id,"file")).length," audio files"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload Audio"]})})]}),0===M.filter(e=>e.type?.startsWith("audio/")&&!Ke(e._id||e.id,"file")).length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(h,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No audio files yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Upload your first audio files to see them here"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"}),"Upload Audio"]})]})})}):we.jsx("div",{className:"row g-3",children:M.filter(e=>e.type?.startsWith("audio/")&&!Ke(e._id||e.id,"file")).map((e,t)=>we.jsx("div",{className:"col-xl-4 col-lg-6 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>te(e),style:{animationDelay:50*t+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsx("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"120px",backgroundColor:"#f8f9fa"},children:we.jsx(h,{size:32,className:"text-primary"})}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]}),we.jsx("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),te(e)},title:"Preview",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),rt(e)},title:"Download",children:we.jsx(c,{size:14})}),we.jsx("button",{className:`btn btn-sm ${We(e)?"btn-warning":"btn-outline-warning"} d-flex align-items-center gap-1`,onClick:t=>{t.stopPropagation(),Ue(e)},title:We(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:We(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),ct(e._id||e.id)},title:"Delete",children:we.jsx(m,{size:14})})]})})]})})},e._id||e.id))})]}):"documents"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"Documents"}),we.jsxs("p",{className:"text-muted mb-0",children:[M.filter(e=>(e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")||e.type?.includes("sheet")||e.type?.includes("presentation"))&&!Ke(e._id||e.id,"file")).length," documents"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload Documents"]})})]}),0===M.filter(e=>(e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")||e.type?.includes("sheet")||e.type?.includes("presentation"))&&!Ke(e._id||e.id,"file")).length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(g,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No documents yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Upload your first documents to see them here"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"}),"Upload Documents"]})]})})}):we.jsx("div",{className:"row g-3",children:M.filter(e=>(e.type?.includes("pdf")||e.type?.includes("doc")||e.type?.includes("text")||e.type?.includes("sheet")||e.type?.includes("presentation"))&&!Ke(e._id||e.id,"file")).map((e,t)=>we.jsx("div",{className:"col-xl-4 col-lg-6 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>te(e),style:{animationDelay:50*t+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsxs("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"120px",backgroundColor:"#f8f9fa"},children:[we.jsx(g,{size:32,className:"text-success"}),we.jsx("div",{className:"position-absolute bottom-0 end-0 me-2 mb-2",children:we.jsx("small",{className:"badge bg-success text-uppercase",children:e.name?.split(".").pop()||"DOC"})})]}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]}),we.jsx("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),te(e)},title:"Preview",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),rt(e)},title:"Download",children:we.jsx(c,{size:14})}),we.jsx("button",{className:`btn btn-sm ${We(e)?"btn-warning":"btn-outline-warning"} d-flex align-items-center gap-1`,onClick:t=>{t.stopPropagation(),Ue(e)},title:We(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:We(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),ct(e._id||e.id)},title:"Delete",children:we.jsx(m,{size:14})})]})})]})})},e._id||e.id))})]}):"videos"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"Videos"}),we.jsxs("p",{className:"text-muted mb-0",children:[M.filter(e=>e.type?.startsWith("video/")&&!Ke(e._id||e.id,"file")).length," videos"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload Videos"]})})]}),0===M.filter(e=>e.type?.startsWith("video/")&&!Ke(e._id||e.id,"file")).length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(u,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No videos yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Upload your first videos to see them here"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"}),"Upload Videos"]})]})})}):we.jsx("div",{className:"row g-3",children:M.filter(e=>e.type?.startsWith("video/")&&!Ke(e._id||e.id,"file")).map((e,t)=>we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",role:"button",onClick:()=>te(e),style:{animationDelay:50*t+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsxs("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"180px",backgroundColor:"#000"},children:[e.url?we.jsx("video",{className:"w-100 h-100 rounded-2",style:{objectFit:"cover"},poster:e.thumbnail,children:we.jsx("source",{src:e.url,type:e.type})}):we.jsx(u,{size:32,className:"text-white"}),we.jsx("div",{className:"position-absolute top-50 start-50 translate-middle",children:we.jsx("div",{className:"bg-white bg-opacity-75 rounded-circle p-2",children:we.jsx(u,{size:20,className:"text-dark"})})})]}),we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"fw-semibold text-truncate mb-1",title:e.name,children:e.name}),we.jsx("div",{className:"text-muted small",children:e.size?`${(e.size/1048576).toFixed(1)} MB`:"0 MB"})]}),we.jsx("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:we.jsxs("div",{className:"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),te(e)},title:"Preview",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),rt(e)},title:"Download",children:we.jsx(c,{size:14})}),we.jsx("button",{className:`btn btn-sm ${We(e)?"btn-warning":"btn-outline-warning"} d-flex align-items-center gap-1`,onClick:t=>{t.stopPropagation(),Ue(e)},title:We(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:We(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:t=>{t.stopPropagation(),ct(e._id||e.id)},title:"Delete",children:we.jsx(m,{size:14})})]})})]})})},e._id||e.id))})]}):"trash"===De?we.jsx("div",{className:"fade-in",children:(()=>{const e=JSON.parse(localStorage.getItem("sfm_trash_items")||"[]"),t=new Date(Date.now()-6048e5),s=e.filter(e=>new Date(e.deletedAt)>t);return we.jsxs(we.Fragment,{children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[we.jsxs("div",{children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"Trash"}),we.jsxs("p",{className:"text-muted mb-0",children:[s.length," items  Items are automatically deleted after 7 days"]})]}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:s.length>0&&we.jsxs("button",{className:"btn btn-outline-danger btn-modern",onClick:()=>{ve({show:!0,title:"Empty Trash",message:`Are you sure you want to permanently delete all ${s.length} items? This action cannot be undone.`,onConfirm:()=>{Ge("TRASH_EMPTY",{itemCount:s.length,itemNames:s.map(e=>e.name)}),localStorage.setItem("sfm_trash_items","[]"),pe("Trash emptied successfully",{type:"info"}),Be("trash"),ve({show:!1,title:"",message:"",onConfirm:null})}})},children:[we.jsx(m,{size:16,className:"me-1"})," Empty Trash"]})})]}),0===s.length?we.jsx("div",{className:"text-center py-5",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(m,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"Trash is empty"}),we.jsx("p",{className:"text-muted mb-4",children:"Deleted items will appear here and be automatically removed after 7 days"})]})})}):we.jsx("div",{className:"row g-3",children:s.map((t,s)=>{const a=Math.ceil(7-(Date.now()-new Date(t.deletedAt))/864e5);return we.jsx("div",{className:"col-xl-4 col-lg-6 col-md-6",children:we.jsx(D,{className:"border file-preview-card h-100 hover-lift hover-glow scale-in stagger-item",style:{animationDelay:50*s+"ms"},children:we.jsxs(B,{className:"p-3",children:[we.jsxs("div",{className:"rounded-2 mb-3 d-flex align-items-center justify-content-center position-relative",style:{height:"120px",backgroundColor:"#f8f9fa"},children:["folder"===t.type?we.jsx(C,{size:32,className:"text-primary"}):t.type?.startsWith("image/")&&t.url?we.jsx("img",{src:t.url,alt:t.name,className:"img-fluid rounded-2",style:{maxHeight:"100%",maxWidth:"100%",objectFit:"cover"}}):we.jsx(r,{size:32,className:"text-muted"}),we.jsx("div",{className:"position-absolute top-0 end-0 m-2",children:we.jsxs(O,{color:a<=1?"danger":a<=3?"warning":"info",className:"small",children:[a,"d left"]})})]}),we.jsxs("div",{className:"mb-3",children:[we.jsxs("div",{className:"fw-semibold text-truncate mb-1",title:t.name,children:[t.name,"folder"===t.type&&t.contentsInfo&&we.jsxs("small",{className:"text-muted ms-2",children:["(",t.contentsInfo.totalItems," items)"]})]}),we.jsxs("div",{className:"text-muted small",children:[we.jsxs("div",{children:["Deleted: ",new Date(t.deletedAt).toLocaleDateString()]}),we.jsxs("div",{children:["Type: ","folder"===t.type?"Folder":"File"]}),"folder"!==t.type&&t.size&&we.jsxs("div",{children:["Size: ",(t.size/1048576).toFixed(1)," MB"]})]})]}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between border-top pt-3",children:[we.jsxs("div",{className:"d-flex gap-2",children:[we.jsxs("button",{className:"btn btn-sm btn-outline-success d-flex align-items-center gap-1",onClick:()=>(t=>{const s=e.filter(e=>e._id!==t._id&&e.id!==t.id);localStorage.setItem("sfm_trash_items",JSON.stringify(s)),Ge("TRASH_RESTORE",{itemName:t.name,itemId:t._id||t.id,itemType:t.type,originalLocation:t.originalLocation}),pe(`"${t.name}" restored successfully`,{type:"success"}),Be("trash")})(t),title:"Restore Item",children:[we.jsx(n,{size:14})," Restore"]}),we.jsxs("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1",onClick:()=>(t=>{ve({show:!0,title:"Permanent Delete",message:`Are you sure you want to permanently delete "${t.name}"? This action cannot be undone.`,onConfirm:()=>{const s=e.filter(e=>e._id!==t._id&&e.id!==t.id);localStorage.setItem("sfm_trash_items",JSON.stringify(s)),Ge("TRASH_PERMANENT_DELETE",{itemName:t.name,itemId:t._id||t.id,itemType:t.type,deletedFromTrash:!0}),pe(`"${t.name}" permanently deleted`,{type:"info"}),Be("trash"),ve({show:!1,title:"",message:"",onConfirm:null})}})})(t),title:"Delete Permanently",children:[we.jsx(m,{size:14})," Delete"]})]}),we.jsxs("small",{className:"fw-semibold "+(a<=1?"text-danger":a<=3?"text-warning":"text-muted"),children:[a," day",1!==a?"s":""," left"]})]})]})})},`${t._id||t.id}-${t.deletedAt}`)})})]})})()}):"dashboard"===De?we.jsxs("div",{className:"fade-in",children:[we.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 fade-in",children:[we.jsxs("div",{className:"slide-in-left",children:[we.jsx("h4",{className:"mb-1 fw-bold",children:"My Storage Dashboard"}),we.jsxs("p",{className:"text-muted mb-0",children:[Xe.totalFiles||0," files  ",Xe.totalFolders||0," folders  Last updated: ",Xe.lastUpdated||"Loading..."]})]}),we.jsxs("div",{className:"d-flex gap-3 slide-in-right",children:[we.jsxs("div",{className:"text-center hover-lift stagger-item",children:[we.jsx("div",{className:"h5 fw-bold mb-0 text-primary counter-animate",children:Xe.totalFiles||0}),we.jsx("small",{className:"text-muted",children:"Total Files"})]}),we.jsxs("div",{className:"text-center hover-lift stagger-item",children:[we.jsx("div",{className:"h5 fw-bold mb-0 text-success counter-animate",children:Xe.totalFolders||0}),we.jsx("small",{className:"text-muted",children:"Folders"})]}),we.jsxs("div",{className:"text-center hover-lift stagger-item",children:[we.jsx("div",{className:"h5 fw-bold mb-0 text-info counter-animate",children:Xe.recentFiles||0}),we.jsx("small",{className:"text-muted",children:"Recent (24h)"})]})]})]}),we.jsx(yn,{files:M||[]}),Array.isArray(I)&&I.length>0&&we.jsx("div",{className:"mb-4",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"p-0",children:[we.jsx("div",{className:"p-4 border-bottom",children:we.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[we.jsx("h5",{className:"mb-0 fw-bold",children:"Folders"}),we.jsx("div",{className:"d-flex align-items-center gap-2",children:we.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>ae(!0),disabled:Ce,children:Ce?we.jsxs(we.Fragment,{children:[we.jsx(V,{size:"sm",className:"me-1"})," Creating..."]}):we.jsxs(we.Fragment,{children:[we.jsx(F,{size:14,className:"me-1"})," Create new"]})})})]})}),we.jsx("div",{className:"p-4",children:we.jsxs("div",{className:"row g-3",children:[I.map((e,t)=>we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsxs("div",{className:"folder-card p-3 rounded-3 border hover-lift hover-glow position-relative scale-in stagger-item",style:{animationDelay:100*t+"ms"},children:[we.jsxs("div",{className:"d-flex align-items-center gap-3",role:"button",onClick:()=>lt(e),children:[we.jsx("div",{className:"rounded-2 d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:"#e0e7ff",color:"#4f46e5"},children:we.jsx(C,{size:24})}),we.jsxs("div",{className:"flex-grow-1 min-width-0",children:[we.jsxs("div",{className:"fw-semibold text-truncate mb-1",children:[e.name,(()=>{const t=ht(Qe(e));return t>0?we.jsxs("span",{className:"text-muted fw-normal ms-2",children:["(",t," item",1!==t?"s":"",")"]}):null})()]}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[we.jsxs("div",{className:"d-flex flex-column",children:[(()=>{const t=ut(Qe(e)),s=pt(Qe(e));return t>0||s>0?we.jsxs("small",{className:"text-muted",children:[t>0&&`${t} file${1!==t?"s":""}`,t>0&&s>0&&"  ",s>0&&`${s} folder${1!==s?"s":""}`]}):null})(),(()=>{const t=He(Qe(e));return t>0?we.jsxs("small",{className:"text-muted fw-semibold",style:{color:"#059669",fontSize:"0.8rem"},children:[" ",mt(t)]}):null})()]}),e.locked&&we.jsx(A,{size:12,className:"text-warning"})]})]})]}),we.jsxs("div",{className:"folder-actions mt-3 d-flex gap-2 justify-content-center opacity-0",children:[we.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:t=>{t.stopPropagation(),lt(e)},title:"Open folder",children:we.jsx(l,{size:12})}),we.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:t=>{t.stopPropagation(),ie(e)},title:"Edit folder",children:we.jsx(T,{size:12})}),we.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:t=>{t.stopPropagation(),dt(Qe(e))},title:"Delete folder",children:we.jsx(m,{size:12})})]})]})},Qe(e))),we.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6",children:we.jsx("div",{className:"folder-card add-folder p-3 rounded-3 border d-flex align-items-center justify-content-center hover-lift bounce-in float",role:"button",onClick:()=>ae(!0),style:{minHeight:"80px",animationDelay:100*I.length+200+"ms"},children:we.jsxs("div",{className:"text-center",children:[we.jsx(F,{size:24,className:"text-muted mb-2"}),we.jsx("div",{className:"small text-muted fw-medium",children:"Add Folder"})]})})})]})})]})})}),(!Array.isArray(I)||0===I.length)&&we.jsx("div",{className:"mb-4",children:we.jsx(D,{className:"border-0 shadow-sm",children:we.jsxs(B,{className:"text-center py-5",children:[we.jsx(C,{size:48,className:"text-muted mb-3 opacity-50"}),we.jsx("h6",{className:"fw-bold mb-2",children:"No folders yet"}),we.jsx("p",{className:"text-muted mb-4",children:"Create your first folder to organize your files"}),we.jsxs("button",{className:"btn btn-primary",onClick:()=>ae(!0),children:[we.jsx($,{size:16,className:"me-1"}),"Create Your First Folder"]})]})})}),we.jsxs("div",{className:"row g-4",children:[we.jsx("div",{className:"col-xl-8 col-lg-7",children:we.jsx(jn,{files:M||[],onFileClick:te,onViewAll:()=>{},onUpload:()=>xe.current&&xe.current.click(),onFileDelete:ct,onToggleFavorite:Ue,isFavorited:We})}),we.jsx("div",{className:"col-xl-4 col-lg-5",children:we.jsxs("div",{className:"row g-4",children:[we.jsx("div",{className:"col-12",children:we.jsx(Nn,{files:M||[]})}),we.jsx("div",{className:"col-12",children:we.jsx(kn,{files:M||[]})})]})})]})]}):we.jsxs("div",{className:"fade-in",children:[we.jsx("nav",{className:"breadcrumb-modern mb-4",children:we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsx("button",{className:"btn btn-link p-0 text-decoration-none",onClick:()=>W(null),children:"Home"}),tt.map((e,t)=>we.jsxs(s.Fragment,{children:[we.jsx("span",{className:"text-muted",children:"/"}),we.jsx("button",{className:"btn btn-link p-0 text-decoration-none "+(t===tt.length-1?"text-primary fw-semibold":""),onClick:()=>t===tt.length-1?null:W(Qe(e)),disabled:t===tt.length-1,children:e.name})]},Qe(e)))]})}),we.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[we.jsxs("div",{className:"d-flex align-items-center gap-3",children:[we.jsx("h4",{className:"mb-0 fw-bold",children:et?.name||"Folder"}),we.jsxs("span",{className:"text-muted small",children:["(",it.length+ot.length," items)"]})]}),we.jsxs("div",{className:"d-flex align-items-center gap-2",children:[we.jsxs("button",{className:"btn btn-outline-primary btn-modern",onClick:()=>xe.current&&xe.current.click(),children:[we.jsx(n,{size:16,className:"me-1"})," Upload"]}),we.jsxs("button",{className:"btn btn-primary btn-modern",onClick:()=>ae(!0),children:[we.jsx($,{size:16,className:"me-1"})," New Folder"]}),we.jsxs(Y,{children:[we.jsx("button",{className:"btn btn-outline-secondary "+("grid"===ue?"active":""),onClick:()=>he("grid"),children:we.jsx(k,{size:16})}),we.jsx("button",{className:"btn btn-outline-secondary "+("list"===ue?"active":""),onClick:()=>he("list"),children:we.jsx(_,{size:16})})]})]})]}),Array.isArray(ot)&&ot.length>0&&we.jsxs("div",{className:"mb-5",children:[we.jsx("h6",{className:"text-uppercase text-muted small mb-3 fw-semibold",children:"Folders"}),we.jsx("div",{className:"grid"===ue?"row g-3":"list-group",children:ot.map(e=>we.jsx("div",{className:"grid"===ue?"col-md-4 col-lg-3":"",children:we.jsx(vn,{folder:e,onClick:lt,onEdit:e=>ie(e),onDelete:e=>dt(Qe(e)),isLocked:e.locked,isUnlocked:H.has(Qe(e)),hasMembers:Math.random()>.5,fileCount:ut(Qe(e)),folderSize:He(Qe(e)),totalItems:ht(Qe(e)),subfolderCount:pt(Qe(e))})},Qe(e)))})]}),Array.isArray(it)&&it.length>0&&we.jsxs("div",{children:[we.jsx("h6",{className:"text-uppercase text-muted small mb-3 fw-semibold",children:"Files"}),we.jsx("div",{className:"grid"===ue?"row g-3":"list-group",children:it.map(e=>we.jsx("div",{className:"grid"===ue?"col-md-4 col-lg-3":"list-group-item",children:we.jsx(D,{className:"file-card "+("grid"===ue?"h-100":""),children:we.jsxs(B,{className:"grid"===ue?"d-flex flex-column p-3":"d-flex align-items-center gap-3 p-3",children:[we.jsxs("div",{className:"d-flex align-items-center gap-2 flex-grow-1",children:[we.jsx(r,{className:"text-muted",size:20}),we.jsxs("div",{className:"flex-grow-1 min-width-0",children:[we.jsx("div",{className:"fw-semibold text-truncate",title:e.name,children:e.name}),we.jsx("div",{className:"small text-muted",children:mt(e.size||0)})]})]}),we.jsxs("div",{className:"grid"===ue?"mt-auto d-flex gap-2":"d-flex gap-2",children:[we.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>te(e),title:"Preview file",children:we.jsx(l,{size:14})}),we.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>rt(e),title:"Download file",children:we.jsx(c,{size:14})}),we.jsx("button",{className:"btn btn-sm "+(We(e)?"btn-warning":"btn-outline-warning"),onClick:()=>Ue(e),title:We(e)?"Remove from Favorites":"Add to Favorites",children:we.jsx(d,{size:14,fill:We(e)?"currentColor":"none"})}),we.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>ct(e._id||e.id),title:"Delete file",children:we.jsx(m,{size:14})})]})]})})},e._id||e.id))})]}),0===it.length&&0===ot.length&&we.jsxs("div",{className:"text-center py-5 text-muted",children:[we.jsx(r,{size:48,className:"mb-3 opacity-50"}),we.jsx("div",{className:"h5",children:"This folder is empty"}),we.jsx("div",{children:"Upload files or create folders to get started"})]})]})]})]}),J&&we.jsx($n,{folder:J,onUnlock:async()=>{const e=J._id||J.id,t=J.name;try{q(t=>new Set([...t,e])),await Ge("FOLDER_UNLOCK",{folderName:t,folderId:e,unlockMethod:"PIN"}),_e(!0),Q(null);const[s,a]=await Promise.all([Ye(`/folders?parentId=${e}`),Ye(`/files?folderId=${e}`)]);y(s||[]),R(a||[]),Be("folder"),W(e),pe(`Opened "${t}"`,{type:"success"})}catch(s){pe(`Failed to open folder: ${s.message}`,{type:"error"})}finally{_e(!1)}},onClose:()=>Q(null),token:a,user:t}),ee&&we.jsx(An,{file:ee,onClose:()=>te(null)}),se&&we.jsx(Fn,{onClose:()=>ae(!1),onCreate:(e,t)=>{(async()=>{try{Se(!0),fe(!0),pe("Creating folder...",{type:"info"});const s={name:e,parentId:U||null,locked:!!t,pinHash:t?btoa(`hashed_${t}_salted`):null},a=await Ye("/folders",{method:"POST",body:JSON.stringify(s)});y(e=>[...e,a]),U||L(e=>[...e,a]),await Ge("FOLDER_CREATE",{folderName:e,isLocked:!!t,parentFolderId:U||"root",parentFolderName:et?.name||"Root"}),pe(`Folder "${e}" created successfully`,{type:"success"}),await Ze()}catch(s){pe("Failed to create folder: "+s.message,{type:"error"})}finally{Se(!1),fe(!1)}})()}}),ne&&we.jsx(Tn,{folder:ne,onClose:()=>ie(null),onSave:({name:e,pin:t})=>{(async()=>{try{fe(!0);const s={name:e};t&&t.length>0?s.pinHash=btoa(`hashed_${t}_salted`):s.pinHash="";const a=await Ye(`/folders/${Qe(ne)}`,{method:"PATCH",body:JSON.stringify(s)});y(e=>e.map(e=>Qe(e)===Qe(ne)?a:e)),pe("Folder updated",{type:"success"})}catch(s){pe("Update folder failed: "+s.message,{type:"error"})}finally{fe(!1)}})()}}),oe&&we.jsx(Dn,{user:t,token:a,onClose:()=>re(!1),showToast:pe,onFaceRegistrationChange:e=>$e(e)}),le&&we.jsx(Cn,{user:t,token:a,onClose:()=>ce(!1),onPhotoUpdate:e=>{b({profilePhoto:e})},showToast:pe}),we.jsx("div",{className:"fab d-grid gap-2",children:we.jsxs(K,{alignment:"end",direction:"dropup",children:[we.jsx(G,{color:"primary",className:"rounded-circle shadow",style:{width:56,height:56,padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:we.jsx(F,{})}),we.jsxs(Z,{children:[we.jsx(X,{onClick:()=>ae(!0),children:"New Folder"}),we.jsx(X,{onClick:()=>xe.current&&xe.current.click(),children:"Upload File"})]})]})}),we.jsx(In,{show:Ae.show,folder:Ae.folder,contentsAnalysis:Ae.contentsAnalysis,onCancel:()=>Te({show:!1,folder:null,contentsAnalysis:null}),onConfirm:async()=>{const{folder:e}=Ae;let t;t="object"==typeof e&&null!==e?e._id||e.id:e,t=String(t);try{fe(!0),pe("Moving folder to trash...",{type:"info"});const s=JSON.parse(localStorage.getItem("sfm_trash_items")||"[]"),{fileCount:a,subfolderCount:n}=Ae.contentsAnalysis,i={...e,_id:t,id:t,deletedAt:(new Date).toISOString(),type:"folder",originalLocation:e.parentId?`folder-${e.parentId}`:"root",contentsInfo:{fileCount:a,subfolderCount:n,totalItems:a+n}};s.push(i),localStorage.setItem("sfm_trash_items",JSON.stringify(s)),await Ye(`/folders/${t}`,{method:"DELETE"}),y(e=>e.filter(e=>(e._id||e.id)!==t)),L(e=>e.filter(e=>(e._id||e.id)!==t)),R(e=>e.filter(e=>String(e.folderId)!==String(t))),String(U)===String(t)&&(W(null),Be("dashboard")),await Ge("FOLDER_DELETE",{folderName:e.name,folderId:t,isLocked:e.locked||!1,parentFolderId:e.parentId||"root",contentsInfo:{fileCount:a,subfolderCount:n,totalItems:a+n},movedToTrash:!0}),await Ze();const o=a>0||n>0?` and all its contents (${a} files, ${n} subfolders)`:"";pe(`Folder "${e.name}"${o} moved to trash`,{type:"success"})}catch(s){pe(`Failed to move folder to trash: ${s.message}`,{type:"error"})}finally{fe(!1),Te({show:!1,folder:null,contentsAnalysis:null})}}}),we.jsx(_n,{show:be.show,title:be.title,message:be.message,onCancel:()=>ve({show:!1,title:"",message:"",onConfirm:null}),onConfirm:()=>{const e=be.onConfirm;e&&e()}})]})})}function Dn({user:t,onClose:s,showToast:a,token:n,onFaceRegistrationChange:i}){const[o,r]=e.useState(!1),[c,d]=e.useState(""),[m,u]=e.useState(!1),h=`sfm_face_descriptor_${t?.id||t?.email||"anon"}`,p=`sfm_face_descriptors_${t?.id||t?.email||"anon"}`,[g,w]=e.useState(!1),[f,b]=e.useState(!0);e.useEffect(()=>{(()=>{const e=localStorage.getItem(h),t=localStorage.getItem(p),s=!(!e&&!t);w(s),b(!s)})()},[h,p,m]);return we.jsxs(M,{visible:!0,onClose:s,alignment:"center",size:"lg",children:[we.jsx(R,{children:we.jsx(U,{children:f?" Set Up Face Unlock":" Manage Face Recognition"})}),we.jsxs(W,{children:[f?we.jsxs("div",{className:"text-center mb-4",children:[we.jsxs("div",{className:"mb-3",children:[we.jsx("div",{className:"face-setup-icon mx-auto mb-3",style:{width:"80px",height:"80px",backgroundColor:"var(--color-primary)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:we.jsx(x,{size:40,color:"white"})}),we.jsx("h5",{className:"fw-bold mb-2",children:"One-Time Face Registration"}),we.jsx("p",{className:"text-muted",children:"Register your face once to unlock all your locked folders securely. Your face data is stored locally and encrypted for your privacy."})]}),we.jsxs("div",{className:"row g-3 mb-4",children:[we.jsx("div",{className:"col-md-4",children:we.jsxs("div",{className:"text-center p-3 border rounded",children:[we.jsx(l,{size:24,className:"text-primary mb-2"}),we.jsx("small",{className:"d-block text-muted",children:"Look directly at camera"})]})}),we.jsx("div",{className:"col-md-4",children:we.jsxs("div",{className:"text-center p-3 border rounded",children:[we.jsx(I,{size:24,className:"text-warning mb-2"}),we.jsx("small",{className:"d-block text-muted",children:"Ensure good lighting"})]})}),we.jsx("div",{className:"col-md-4",children:we.jsxs("div",{className:"text-center p-3 border rounded",children:[we.jsx(x,{size:24,className:"text-success mb-2"}),we.jsx("small",{className:"d-block text-muted",children:"Remove glasses/mask"})]})})]})]}):we.jsxs("div",{children:[we.jsx("p",{className:"text-muted mb-3",children:"Your face is already registered and can be used to unlock locked folders."}),g&&we.jsx(H,{color:"info",className:"py-2 text-center",children:" Face recognition is active for your account"})]}),we.jsxs("div",{className:"d-grid gap-2",children:[we.jsx(J,{color:f?"primary":"success",disabled:o,onClick:async()=>{r(!0),d(""),u(!1);let e=null,s=null;try{const r=await function(e,t){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in xe)return;xe[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(()=>import("./vendor-face-DDNpkcb7.js"),[]);await async function(e){const t=["/models","https://justadudewhohacks.github.io/face-api.js/models","https://unpkg.com/face-api.js@0.22.2/weights","https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/weights"];let s=null;for(const n of t)try{return await e.nets.tinyFaceDetector.loadFromUri(n),await e.nets.faceRecognitionNet.loadFromUri(n),void(await e.nets.faceLandmark68Net.loadFromUri(n))}catch(a){s=a}throw s||new Error("Failed to load face-api models from all sources")}(r),e=document.createElement("video"),e.autoplay=!0,e.playsInline=!0,e.width=640,e.height=480,e.style.position="fixed",e.style.top="-9999px",document.body.appendChild(e);try{s=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}})}catch(o){throw new Error("Camera access denied. Please allow camera access to register your face.")}e.srcObject=s,await new Promise((t,s)=>{e.onloadedmetadata=()=>t(),e.onerror=()=>s(new Error("Failed to load camera stream")),setTimeout(()=>s(new Error("Camera loading timeout")),1e4)}),await new Promise(e=>setTimeout(e,2e3));let p=null;const g=5;for(let t=0;t<g;t++)try{const s=[new r.TinyFaceDetectorOptions({inputSize:416,scoreThreshold:.5}),new r.TinyFaceDetectorOptions({inputSize:320,scoreThreshold:.4}),new r.TinyFaceDetectorOptions({inputSize:224,scoreThreshold:.3})];for(const t of s){if(p=await r.detectSingleFace(e,t).withFaceLandmarks().withFaceDescriptor(),p&&p.descriptor)break;await new Promise(e=>setTimeout(e,300))}if(p&&p.descriptor)break;t<g-1&&await new Promise(e=>setTimeout(e,1e3))}catch(l){}if(!p||!p.descriptor)return void d(" No face detected. Please ensure:\n Your face is clearly visible and centered\n You're looking directly at the camera\n There's good lighting on your face\n Remove glasses or masks if wearing any\n Try again");const x=[];x.push(Array.from(p.descriptor));for(let t=0;t<2;t++){await new Promise(e=>setTimeout(e,1e3));try{const t=await r.detectSingleFace(e,new r.TinyFaceDetectorOptions({inputSize:416,scoreThreshold:.4})).withFaceLandmarks().withFaceDescriptor();t&&t.descriptor&&x.push(Array.from(t.descriptor))}catch(c){}}const v=h,y=`sfm_face_descriptors_${t?.id||t?.email||"anon"}`;localStorage.setItem(v,JSON.stringify(x[0])),localStorage.setItem(y,JSON.stringify(x));try{await fetch("/api/auth/face",{method:"PUT",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},body:JSON.stringify({descriptor:x[0],descriptors:x})})}catch(m){}u(!0),w(!0),b(!1),i&&i(!0),await logActivity("FACE_REGISTRATION",{isFirstTime:f,descriptorCount:x.length,success:!0}),a(f?" Face registration complete! You can now unlock any locked folder with your face. No need to register again!":`Face registration updated successfully! (${x.length} samples captured)`,{type:"success"})}catch(c){d(" Face registration error: "+c.message)}finally{s&&s.getTracks().forEach(e=>e.stop()),e&&e.parentNode&&e.parentNode.removeChild(e),r(!1)}},size:"lg",children:o?we.jsxs(we.Fragment,{children:[we.jsx(V,{size:"sm",className:"me-2"})," Scanning your face..."]}):f?we.jsx(we.Fragment,{children:" Register My Face"}):we.jsx(we.Fragment,{children:" Update Face Registration"})}),g&&!f&&we.jsx(J,{color:"danger",variant:"outline",disabled:o,onClick:async()=>{localStorage.removeItem(h),localStorage.removeItem(p);try{await fetch("/api/auth/face",{method:"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}})}catch(e){}w(!1),u(!1),b(!0),i&&i(!1),a("Face registration completely removed. You'll need to re-register to use face unlock again.",{type:"info"})},children:" Remove Face Registration"}),c&&we.jsx(H,{color:"danger",className:"py-2 text-center mt-3",children:c}),m&&we.jsxs(H,{color:"success",className:"py-2 text-center mt-3",children:[" ",f?"Face registered successfully! You can now use face unlock for any locked folder.":"Face registration updated successfully!"]})]})]}),we.jsx(q,{children:we.jsx(J,{color:"secondary",variant:"outline",onClick:s,children:m&&f?"Get Started":"Close"})})]})}"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller})})}).catch(e=>{})}),navigator.serviceWorker.addEventListener("message",e=>{const{type:t,fileName:s,offline:a}=e.data})),ge(document.getElementById("root")).render(we.jsx(s.StrictMode,{children:we.jsx(bn,{children:we.jsx(Ln,{})})}));
